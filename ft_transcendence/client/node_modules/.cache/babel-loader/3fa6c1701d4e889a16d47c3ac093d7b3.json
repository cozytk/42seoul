{"ast":null,"code":"var _jsxFileName = \"/Users/jinkim/bye_blackhole/client/src/SideBar/GetChatList.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/GetChatList.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst GetChatList = props => {\n  _s();\n\n  const {\n    myID\n  } = props;\n\n  const fetcher = async url => {\n    if (myID) {\n      const res = await axios.get(url); //kick or ban\n\n      if (window.location.pathname === '/chat') {\n        const currentRoom = sessionStorage.getItem('roomName');\n        var leave = true;\n\n        for (let i = 0; i < res.data.length; i++) {\n          if (res.data[i].title === currentRoom) leave = false;\n        }\n\n        if (leave) {\n          window.location.href = '/lobby';\n          sessionStorage.removeItem('roomName');\n        }\n      }\n\n      return res.data;\n    }\n  };\n\n  const {\n    data,\n    error,\n    mutate\n  } = useSwr('/Lobby/myChatList?id=' + myID, fetcher);\n\n  const DelChat = async title => {\n    await axios.delete('Lobby?title=' + title + '&id=' + myID);\n\n    if (window.location.pathname === '/chat' && sessionStorage.getItem('roomName') === title) {\n      window.location.href = '/lobby';\n      sessionStorage.removeItem('roomName');\n    }\n\n    mutate();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: \"# my chats\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }, this), data === null || data === void 0 ? void 0 : data.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"chat-btn\",\n        onClick: () => {\n          document.location.href = '/Chat';\n          sessionStorage.setItem('roomName', chat.title);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chatNum\",\n          children: chat.num\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\xA0\", chat.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"chatLeave\",\n        onClick: () => DelChat(chat.title),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this))]\n  }, void 0, true);\n};\n\n_s(GetChatList, \"qrBG9ouKwjJK0dFs42VntVOSBRU=\", false, function () {\n  return [useSwr];\n});\n\n_c = GetChatList;\nexport default GetChatList;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetChatList\");","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/SideBar/GetChatList.tsx"],"names":["axios","useSwr","GetChatList","props","myID","fetcher","url","res","get","window","location","pathname","currentRoom","sessionStorage","getItem","leave","i","data","length","title","href","removeItem","error","mutate","DelChat","delete","map","chat","document","setItem","num"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/GetChatList.scss\"\n\nconst GetChatList = (props: any) => {\n\tconst {myID} = props\n\n\tconst fetcher = async (url:string) => {\n\t\tif (myID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\n\t\t\t//kick or ban\n\t\t\tif (window.location.pathname === '/chat')\n\t\t\t{\n\t\t\t\tconst currentRoom = sessionStorage.getItem('roomName')\n\t\t\t\tvar leave = true\n\t\t\t\t\n\t\t\t\tfor(let i = 0; i < res.data.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (res.data[i].title === currentRoom)\n\t\t\t\t\t\tleave = false\n\t\t\t\t}\n\n\t\t\t\tif (leave)\n\t\t\t\t{\n\t\t\t\t\twindow.location.href = '/lobby'\n\t\t\t\t\tsessionStorage.removeItem('roomName')\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res.data;\n\t\t}\n\t}\n\n\tconst {data, error, mutate} = useSwr<{title:string, num: number}[]>('/Lobby/myChatList?id=' + myID, fetcher)\n\n\tconst DelChat = async(title:string) => {\n\t\tawait axios.delete('Lobby?title=' + title + '&id=' + myID)\n\t\tif (window.location.pathname === '/chat' && sessionStorage.getItem('roomName') === title)\n\t\t{\n\t\t\twindow.location.href = '/lobby'\n\t\t\tsessionStorage.removeItem('roomName')\n\t\t}\n\t\tmutate()\n\t}\n\n\treturn (\n\t<>\n\t\t<div className=\"title\"># my chats</div>\n\t\t{data?.map(chat=>\n\t\t\t<div className=\"chat\">\n\t\t\t\t<button type=\"button\" className=\"chat-btn\" onClick={() => {\n\t\t\t\t\t\tdocument.location.href = '/Chat';\n\t\t\t\t\t\tsessionStorage.setItem('roomName', chat.title);\n\t\t\t\t}}>\n\t\t\t\t\t<span className=\"chatNum\">{chat.num}</span>\n\t\t\t\t\t<span>&nbsp;{chat.title}</span>\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" className=\"chatLeave\" onClick={() => DelChat(chat.title)}>X</button>\n\t\t\t</div>\n\t\t)}\n\t</>\n\t)\n}\n\nexport default GetChatList"]},"metadata":{},"sourceType":"module"}