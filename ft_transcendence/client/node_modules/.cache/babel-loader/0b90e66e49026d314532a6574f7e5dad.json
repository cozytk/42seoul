{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useEffect}from'react';import axios from\"axios\";import\"./styles/Modal.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PwdCheckModal=function PwdCheckModal(props){var open=props.open,close=props.close,chatRoomID=props.chatRoomID;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),MyID=_useState2[0],setMyID=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),PWD=_useState4[0],setPWD=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),WorngPWD=_useState6[0],setWrongPWD=_useState6[1];useEffect(function(){var id=sessionStorage.getItem('nickname');if(id)setMyID(id);});var handelPWD=useCallback(function(e){setPWD(e.target.value);},[]);function confirmPWD(){return _confirmPWD.apply(this,arguments);}function _confirmPWD(){_confirmPWD=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.put('/Lobby/enter/'+chatRoomID,{id:MyID,password:PWD}).then(function(res){document.location.href='/Chat';sessionStorage.setItem('roomName',chatRoomID);}).catch(function(err){setWrongPWD(true);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _confirmPWD.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"header\",{children:[\"Enter Password\",/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:function onClick(){close();setWrongPWD(false);},children:\" \\xD7 \"})]}),/*#__PURE__*/_jsxs(\"main\",{children:[\"password: \",/*#__PURE__*/_jsx(\"input\",{onChange:handelPWD}),WorngPWD?/*#__PURE__*/_jsx(\"label\",{className:\"error\",children:\"\\uD2C0\\uB9B0 \\uBE44\\uBC00\\uBC88\\uD638\\uC785\\uB2C8\\uB2E4.\"}):null]}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary\",onClick:confirmPWD,children:/*#__PURE__*/_jsx(\"b\",{children:\"Enter\"})})})]}):null});};export default PwdCheckModal;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/Lobby/PwdCheckModal.tsx"],"names":["React","useState","useCallback","useEffect","axios","PwdCheckModal","props","open","close","chatRoomID","MyID","setMyID","PWD","setPWD","WorngPWD","setWrongPWD","id","sessionStorage","getItem","handelPWD","e","target","value","confirmPWD","put","password","then","res","document","location","href","setItem","catch","err"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,WAAzB,CAAsCC,SAAtC,KAAsD,OAAtD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,qBAAP,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAEC,KAAF,CAAkB,IAC/BC,CAAAA,IAD+B,CACJD,KADI,CAC/BC,IAD+B,CACzBC,KADyB,CACJF,KADI,CACzBE,KADyB,CAClBC,UADkB,CACJH,KADI,CAClBG,UADkB,eAGfR,QAAQ,CAAC,EAAD,CAHO,wCAGhCS,IAHgC,eAG1BC,OAH0B,8BAIjBV,QAAQ,CAAC,EAAD,CAJS,yCAIhCW,GAJgC,eAI3BC,MAJ2B,8BAKPZ,QAAQ,CAAC,KAAD,CALD,yCAKhCa,QALgC,eAKtBC,WALsB,eAOvCZ,SAAS,CAAC,UAAM,CACf,GAAMa,CAAAA,EAAE,CAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAX,CACA,GAAIF,EAAJ,CAAQL,OAAO,CAACK,EAAD,CAAP,CACR,CAHQ,CAAT,CAKA,GAAMG,CAAAA,SAAS,CAAGjB,WAAW,CAAC,SAACkB,CAAD,CAAW,CACxCP,MAAM,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAAN,CACA,CAF4B,CAE1B,EAF0B,CAA7B,CAZuC,QAgBxBC,CAAAA,UAhBwB,wIAgBvC,mIACCnB,KAAK,CAACoB,GAAN,CAAU,gBAAkBf,UAA5B,CAAwC,CAACO,EAAE,CAACN,IAAJ,CAAUe,QAAQ,CAACb,GAAnB,CAAxC,EACCc,IADD,CACM,SAACC,GAAD,CAAS,CACdC,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,CAAyB,OAAzB,CACAb,cAAc,CAACc,OAAf,CAAuB,UAAvB,CAAmCtB,UAAnC,EACA,CAJD,EAKCuB,KALD,CAKO,SAACC,GAAD,CAAS,CACflB,WAAW,CAAC,IAAD,CAAX,CACA,CAPD,EADD,sDAhBuC,6CA2BvC,mBACC,YAAK,SAAS,CAAGR,IAAI,CAAG,iBAAH,CAAuB,OAA5C,UACGA,IAAI,cACL,wCACC,wDAEC,eAAQ,SAAS,CAAC,OAAlB,CAA0B,OAAO,CAAE,kBAAM,CACxCC,KAAK,GACLO,WAAW,CAAC,KAAD,CAAX,CACA,CAHD,oBAFD,GADD,cAQC,kDACW,cAAO,QAAQ,CAAEI,SAAjB,EADX,CAEEL,QAAQ,cAAG,cAAO,SAAS,CAAC,OAAjB,sEAAH,CAAkD,IAF5D,GARD,cAYC,qCACC,UAAG,SAAS,CAAC,iBAAb,CAA+B,OAAO,CAAES,UAAxC,uBAAoD,4BAApD,EADD,EAZD,GADK,CAiBF,IAlBL,EADD,CAsBA,CAjDD,CAmDA,cAAelB,CAAAA,aAAf","sourcesContent":["import React, {useState, useCallback, useEffect} from 'react';\nimport axios from \"axios\";\nimport \"./styles/Modal.scss\";\n\nconst PwdCheckModal = ( props: any ) => {\n\tconst { open, close, chatRoomID} = props;\n\n\tconst [MyID, setMyID] = useState('')\n\tconst [PWD, setPWD] = useState(\"\");\n\tconst [WorngPWD, setWrongPWD] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst id = sessionStorage.getItem('nickname')\n\t\tif (id) setMyID(id)\n\t})\n\n\tconst handelPWD = useCallback((e:any) => {\n\t\tsetPWD(e.target.value)\n\t}, []);\n\n\tasync function confirmPWD(){\n\t\taxios.put('/Lobby/enter/' + chatRoomID, {id:MyID, password:PWD})\n\t\t.then((res) => {\n\t\t\tdocument.location.href = '/Chat';\n\t\t\tsessionStorage.setItem('roomName', chatRoomID)\n\t\t})\n\t\t.catch((err) => {\n\t\t\tsetWrongPWD(true)\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? (\n\t\t\t\t<section>\n\t\t\t\t\t<header>\n\t\t\t\t\t\tEnter Password\n\t\t\t\t\t\t<button className=\"close\" onClick={() => {\n\t\t\t\t\t\t\tclose()\n\t\t\t\t\t\t\tsetWrongPWD(false)\n\t\t\t\t\t\t}}> &times; </button>\n\t\t\t\t\t</header>\n\t\t\t\t\t<main>\n\t\t\t\t\t\tpassword: <input onChange={handelPWD}></input>\n\t\t\t\t\t\t{WorngPWD ? <label className=\"error\">틀린 비밀번호입니다.</label> : null}\n\t\t\t\t\t</main>\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<a className=\"btn btn-primary\" onClick={confirmPWD}><b>Enter</b></a>\n\t\t\t\t\t</footer>\n\t\t\t\t</section>\n\t\t\t) : null }\n\t\t</div>\n\t)\n}\n\nexport default PwdCheckModal"]},"metadata":{},"sourceType":"module"}