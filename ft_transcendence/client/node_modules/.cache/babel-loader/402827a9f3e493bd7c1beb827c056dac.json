{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./styles/UserList.scss\";import{findImg}from'../Images/Images';import crown from'../Images/crown.png';import UserListModal from'./UserListModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserList=function UserList(_ref){var socket=_ref.socket;var _useState=useState([{id:'2222',icon:'woman_icon',status:'administrator'},{id:'3333',icon:'man_icon',status:'none'},{id:'jinkim',icon:'gamer_boy',status:'owner'},{id:'2222',icon:'woman_icon',status:'administrator'},{id:'3333',icon:'man_icon',status:'none'}]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];var _useState3=useState({id:'jinkim',status:'administrator'}),_useState4=_slicedToArray(_useState3,2),myInfo=_useState4[0],setMyInfo=_useState4[1];useEffect(function(){socket.on(\"UserList\",function(newUser){setUserList(newUser);userSorting();});return function(){socket.disconnect();};},[socket]);function userSorting(){var owner=userList.find(function(ele){if(ele.status==='owner')return true;});var tmp=[{id:owner===null||owner===void 0?void 0:owner.id,icon:owner===null||owner===void 0?void 0:owner.icon,status:owner===null||owner===void 0?void 0:owner.status}];var idx=userList.indexOf(owner);if(idx>-1)userList.splice(idx,1);userList.forEach(function(ele){if(ele.status==='administrator'){tmp.push(ele);idx=userList.indexOf(ele);if(idx>-1)userList.splice(idx,1);}});userList.forEach(function(ele){tmp.push(ele);});setUserList(tmp);}//UserListModal\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),chatUser=_useState6[0],setChatUser=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),UserListModalState=_useState8[0],setUserListModalState=_useState8[1];var openUserListModal=function openUserListModal(id){setUserListModalState(true);setChatUser(id);};var closeUserListModal=function closeUserListModal(){setUserListModalState(false);};//owner button\nfunction plusBtn(_x){return _plusBtn.apply(this,arguments);}function _plusBtn(){_plusBtn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return _plusBtn.apply(this,arguments);}function minusBtn(_x2){return _minusBtn.apply(this,arguments);}function _minusBtn(){_minusBtn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));return _minusBtn.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"userList-container\",children:[userList===null||userList===void 0?void 0:userList.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:\"userList-box\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"userList-btn\",onClick:function onClick(){return myInfo.status==='administrator'&&'jinkim'!==user.id&&user.status==='none'?openUserListModal(user.id):null;},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"iconBox\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"30\",height:\"30\",className:\"icon\"})}),/*#__PURE__*/_jsx(\"span\",{children:user.status!=='none'?/*#__PURE__*/_jsx(\"img\",{src:crown,width:\"20\",height:\"20\",className:user.status==='owner'?'crown owner':'crown administrator'}):null})]}),/*#__PURE__*/_jsx(\"span\",{className:\"id\",children:user.id})]}),/*#__PURE__*/_jsx(\"span\",{children:myInfo.status==='owner'&&user.status==='none'?/*#__PURE__*/_jsx(\"button\",{className:\"owner-plusBtn\",onClick:function onClick(){return plusBtn(user.id);},children:\"+\"}):null}),/*#__PURE__*/_jsx(\"span\",{children:myInfo.status==='owner'&&user.status==='administrator'?/*#__PURE__*/_jsx(\"button\",{className:\"owner-xBtn\",onClick:function onClick(){return minusBtn(user.id);},children:\"x\"}):null})]});}),/*#__PURE__*/_jsx(UserListModal,{open:UserListModalState,close:closeUserListModal,targetID:chatUser})]});};export default UserList;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/Chat/UserList.tsx"],"names":["React","useEffect","useState","findImg","crown","UserListModal","UserList","socket","id","icon","status","userList","setUserList","myInfo","setMyInfo","on","newUser","userSorting","disconnect","owner","find","ele","tmp","idx","indexOf","splice","forEach","push","chatUser","setChatUser","UserListModalState","setUserListModalState","openUserListModal","closeUserListModal","plusBtn","minusBtn","map","user"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport \"./styles/UserList.scss\"\nimport {findImg} from '../Images/Images'\nimport crown from '../Images/crown.png'\nimport UserListModal from './UserListModal'\nimport axios from \"axios\";\n\nconst UserList = ({ socket }: any) => {\n\tconst [userList, setUserList] = useState<{id: string, icon:string, status:string}[]>([{id:'2222', icon:'woman_icon', status:'administrator'}, {id:'3333', icon:'man_icon', status:'none'}, {id:'jinkim', icon:'gamer_boy', status:'owner'}, {id:'2222', icon:'woman_icon', status:'administrator'}, {id:'3333', icon:'man_icon', status:'none'}]);\n\n\tconst [myInfo, setMyInfo] = useState<{id: string, status:string}>({id:'jinkim', status:'administrator'})\n\n\tuseEffect(() => {\n\t\tsocket.on(\"UserList\", (newUser:{id: string, icon:string, status:string}[]) => {\n\t\t\tsetUserList(newUser);\n\t\t\tuserSorting();\n\t\t});\n\n\t\treturn () => {\n\t\t\tsocket.disconnect();\n\t\t};\n\t}, [socket]);\n\n\tfunction userSorting()\n\t{\n\t\tconst owner = userList.find((ele) => {\n\t\t\tif (ele.status === 'owner')\n\t\t\t\treturn true;\n\t\t})\n\t\tlet tmp = [{id:owner?.id, icon: owner?.icon, status:owner?.status}]\n\n\t\tlet idx = userList.indexOf(owner as never)\n\t\tif (idx > -1) userList.splice(idx, 1)\n\n\t\tuserList.forEach((ele) => {\n\t\t\tif (ele.status === 'administrator')\n\t\t\t{\n\t\t\t\ttmp.push(ele);\n\t\t\t\tidx = userList.indexOf(ele as never)\n\t\t\t\tif (idx > -1) userList.splice(idx, 1)\n\t\t\t}\n\t\t})\n\n\t\tuserList.forEach((ele) => { tmp.push(ele); })\n\t\tsetUserList(tmp as never);\n\t}\n\n\t//UserListModal\n\tconst [chatUser, setChatUser] = useState('')\n\tconst [UserListModalState, setUserListModalState] = useState(false);\n\tconst openUserListModal = (id:string) => {\n\t\tsetUserListModalState(true);\n\t\tsetChatUser(id);\n\t}\n\tconst closeUserListModal = () => {\n\t\tsetUserListModalState(false);\n\t}\n\n\t//owner button\n\tasync function plusBtn(id:string){\n\t\t//const rtn = await axios.get('chat/chatRoomID/admin/plus' + id)\n\t\t//setUserList(rtn.data)\n\n\t}\n\tasync function minusBtn(id:string){\n\t\t//await axios.get('chat/chatRoomID/admin/minus' + id)\n\t\t//setUserList(rtn.data)\n\t}\n\n\treturn (\n\t\t<div className=\"userList-container\">\n\t\t\t{userList?.map(user=>\n\t\t\t<div className=\"userList-box\">\n\t\t\t\t<button className=\"userList-btn\" onClick={() => myInfo.status === 'administrator' && 'jinkim' !== user.id && user.status === 'none' ? openUserListModal(user.id): null}>\n\t\t\t\t\t<span className=\"iconBox\">\n\t\t\t\t\t\t<span><img src={findImg(user.icon)} width=\"30\" height=\"30\" className=\"icon\"/></span>\n\t\t\t\t\t\t<span>{user.status !== 'none' ?\n\t\t\t\t\t\t\t<img src={crown} width=\"20\" height=\"20\" className={user.status === 'owner' ? 'crown owner' : 'crown administrator'}/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className='id'>{user.id}</span>\n\t\t\t\t</button>\n\t\t\t\t<span>{myInfo.status === 'owner' && user.status === 'none' ?\n\t\t\t\t\t<button className=\"owner-plusBtn\" onClick={() => plusBtn(user.id)}>+</button>\n\t\t\t\t\t: null\n\t\t\t\t}</span>\n\t\t\t\t<span>{myInfo.status === 'owner' && user.status === 'administrator' ?\n\t\t\t\t\t<button className=\"owner-xBtn\" onClick={() => minusBtn(user.id)}>x</button>\n\t\t\t\t\t: null\n\t\t\t\t}</span>\n\t\t\t</div>\n\t\t\t)}\n\t\t\t<UserListModal open={UserListModalState} close={closeUserListModal} targetID={chatUser}></UserListModal>\n\t\t</div>\n\n\t);\n  };\n  export default UserList;\n"]},"metadata":{},"sourceType":"module"}