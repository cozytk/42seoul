{"ast":null,"code":"var _jsxFileName = \"/Users/jinkim/bye_blackhole/client/src/SideBar/GetChatList.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/GetChatList.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst GetChatList = props => {\n  _s();\n\n  const {\n    myID\n  } = props;\n\n  const fetcher = async url => {\n    if (myID) {\n      const res = await axios.get(url);\n      return res.data;\n    }\n  };\n\n  const {\n    data,\n    error,\n    mutate\n  } = useSwr('/Lobby/myChatList?id=' + myID, fetcher);\n\n  const LeaveChat = async title => {\n    await axios.delete('Lobby?title=' + title + '&id=' + myID);\n    mutate();\n\n    if (window.location.pathname === '/chat' && sessionStorage.getItem('roomName') === title) {\n      window.location.href = '/lobby';\n      sessionStorage.removeItem('roomName');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: \"# my chats\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 3\n    }, this), data === null || data === void 0 ? void 0 : data.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"chat-btn\",\n        onClick: () => {\n          document.location.href = '/Chat';\n          sessionStorage.setItem('roomName', chat.title);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chatNum\",\n          children: chat.num\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\xA0\", chat.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"chatLeave\",\n        onClick: () => LeaveChat(chat.title),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 4\n    }, this))]\n  }, void 0, true);\n};\n\n_s(GetChatList, \"qrBG9ouKwjJK0dFs42VntVOSBRU=\", false, function () {\n  return [useSwr];\n});\n\n_c = GetChatList;\nexport default GetChatList;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetChatList\");","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/SideBar/GetChatList.tsx"],"names":["axios","useSwr","GetChatList","props","myID","fetcher","url","res","get","data","error","mutate","LeaveChat","title","delete","window","location","pathname","sessionStorage","getItem","href","removeItem","map","chat","document","setItem","num"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,KAAnB;AACA,OAAO,2BAAP;;;;AAEA,MAAMC,WAAW,GAAIC,KAAD,IAAgB;AAAA;;AACnC,QAAM;AAACC,IAAAA;AAAD,MAASD,KAAf;;AAEA,QAAME,OAAO,GAAG,MAAOC,GAAP,IAAsB;AACrC,QAAIF,IAAJ,EACA;AACC,YAAMG,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAUF,GAAV,CAAlB;AACA,aAAOC,GAAG,CAACE,IAAX;AACA;AACD,GAND;;AAQA,QAAM;AAACA,IAAAA,IAAD;AAAOC,IAAAA,KAAP;AAAcC,IAAAA;AAAd,MAAwBV,MAAM,CAAgC,0BAA0BG,IAA1D,EAAgEC,OAAhE,CAApC;;AAEA,QAAMO,SAAS,GAAG,MAAMC,KAAN,IAAuB;AACxC,UAAMb,KAAK,CAACc,MAAN,CAAa,iBAAiBD,KAAjB,GAAyB,MAAzB,GAAkCT,IAA/C,CAAN;AACAO,IAAAA,MAAM;;AACN,QAAII,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,OAA7B,IAAwCC,cAAc,CAACC,OAAf,CAAuB,UAAvB,MAAuCN,KAAnF,EACA;AACCE,MAAAA,MAAM,CAACC,QAAP,CAAgBI,IAAhB,GAAuB,QAAvB;AACAF,MAAAA,cAAc,CAACG,UAAf,CAA0B,UAA1B;AACA;AACD,GARD;;AAUA,sBACA;AAAA,4BACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,EAEEZ,IAFF,aAEEA,IAFF,uBAEEA,IAAI,CAAEa,GAAN,CAAUC,IAAI,iBACd;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACC;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,UAAhC;AAA2C,QAAA,OAAO,EAAE,MAAM;AACxDC,UAAAA,QAAQ,CAACR,QAAT,CAAkBI,IAAlB,GAAyB,OAAzB;AACAF,UAAAA,cAAc,CAACO,OAAf,CAAuB,UAAvB,EAAmCF,IAAI,CAACV,KAAxC;AACD,SAHD;AAAA,gCAIC;AAAM,UAAA,SAAS,EAAC,SAAhB;AAAA,oBAA2BU,IAAI,CAACG;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAJD,eAKC;AAAA,6BAAaH,IAAI,CAACV,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,gBALD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eAQC;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,WAAhC;AAA4C,QAAA,OAAO,EAAE,MAAMD,SAAS,CAACW,IAAI,CAACV,KAAN,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARD;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,CAFF;AAAA,kBADA;AAiBA,CAxCD;;GAAMX,W;UAWyBD,M;;;KAXzBC,W;AA0CN,eAAeA,WAAf","sourcesContent":["import axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/GetChatList.scss\"\n\nconst GetChatList = (props: any) => {\n\tconst {myID} = props\n\n\tconst fetcher = async (url:string) => {\n\t\tif (myID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\treturn res.data;\n\t\t}\n\t}\n\n\tconst {data, error, mutate} = useSwr<{title:string, num: number}[]>('/Lobby/myChatList?id=' + myID, fetcher)\n\n\tconst LeaveChat = async(title:string) => {\n\t\tawait axios.delete('Lobby?title=' + title + '&id=' + myID)\n\t\tmutate()\n\t\tif (window.location.pathname === '/chat' && sessionStorage.getItem('roomName') === title)\n\t\t{\n\t\t\twindow.location.href = '/lobby'\n\t\t\tsessionStorage.removeItem('roomName')\n\t\t}\n\t}\n\n\treturn (\n\t<>\n\t\t<div className=\"title\"># my chats</div>\n\t\t{data?.map(chat=>\n\t\t\t<div className=\"chat\">\n\t\t\t\t<button type=\"button\" className=\"chat-btn\" onClick={() => {\n\t\t\t\t\t\tdocument.location.href = '/Chat';\n\t\t\t\t\t\tsessionStorage.setItem('roomName', chat.title);\n\t\t\t\t}}>\n\t\t\t\t\t<span className=\"chatNum\">{chat.num}</span>\n\t\t\t\t\t<span>&nbsp;{chat.title}</span>\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" className=\"chatLeave\" onClick={() => LeaveChat(chat.title)}>X</button>\n\t\t\t</div>\n\t\t)}\n\t</>\n\t)\n}\n\nexport default GetChatList"]},"metadata":{},"sourceType":"module"}