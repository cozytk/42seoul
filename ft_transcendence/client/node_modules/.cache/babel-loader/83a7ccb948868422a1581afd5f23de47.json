{"ast":null,"code":"import _slicedToArray from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useState}from\"react\";import axios from\"axios\";import useSwr from'swr';import lock from'../Images/lock.png';import unlock from'../Images/unlock.png';import\"./styles/ChatList.scss\";import PwdCheckModal from\"./PwdCheckModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChatList=function ChatList(props){var MyID=props.MyID;var fetcher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetcher(_x){return _ref.apply(this,arguments);};}();var _useSwr=useSwr('Lobby/chatList',fetcher),data=_useSwr.data,error=_useSwr.error;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),ClickedRoomTitle=_useState2[0],setClickedRoomTitle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),PwdCheckModalState=_useState4[0],setPwdCheckModalState=_useState4[1];var openPwdCheckModal=function openPwdCheckModal(title){setPwdCheckModalState(true);setClickedRoomTitle(title);};var closePwdCheckModal=function closePwdCheckModal(){setPwdCheckModalState(false);};function enterPublicRoom(_x2){return _enterPublicRoom.apply(this,arguments);}function _enterPublicRoom(){_enterPublicRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/Lobby/enter',{title:title,id:MyID,password:''});case 2:document.location.href='/chat';sessionStorage.setItem('roomName',title);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _enterPublicRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[data===null||data===void 0?void 0:data.map(function(chatRoom){return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"chatList\",onClick:function onClick(){if(chatRoom.security==='protected')openPwdCheckModal(chatRoom.title);else enterPublicRoom(chatRoom.title);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"chatList-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chatList-num\",children:chatRoom.num})}),/*#__PURE__*/_jsx(\"span\",{className:\"lock\",children:chatRoom.security!=\"protected\"?/*#__PURE__*/_jsx(\"img\",{src:unlock,width:\"20\",height:\"20\"}):/*#__PURE__*/_jsx(\"img\",{src:lock,width:\"20\",height:\"20\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"roomName\",children:chatRoom.title})]});}),/*#__PURE__*/_jsx(PwdCheckModal,{open:PwdCheckModalState,close:closePwdCheckModal,chatRoomID:ClickedRoomTitle,MyID:MyID})]});};export default ChatList;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/Lobby/ChatList.tsx"],"names":["useState","axios","useSwr","lock","unlock","PwdCheckModal","ChatList","props","MyID","fetcher","url","get","res","data","error","ClickedRoomTitle","setClickedRoomTitle","PwdCheckModalState","setPwdCheckModalState","openPwdCheckModal","title","closePwdCheckModal","enterPublicRoom","post","id","password","document","location","href","sessionStorage","setItem","map","chatRoom","security","num"],"mappings":"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","sourcesContent":["import {useEffect, useState, useCallback} from \"react\";\nimport axios from \"axios\";\nimport useSwr from 'swr';\nimport lock from '../Images/lock.png'\nimport unlock from '../Images/unlock.png'\nimport \"./styles/ChatList.scss\"\nimport PwdCheckModal from \"./PwdCheckModal\";\n\nconst ChatList = (props: any) => {\n\tconst {MyID} = props\n\n\tconst fetcher = async (url:string) => {\n\t\tconst res = await axios.get(url)\n\t\treturn res.data;\n\t}\n\n\tconst {data, error} = useSwr<{title:string, num:number, security:string}[]>('Lobby/chatList', fetcher)\n\n\tconst [ClickedRoomTitle, setClickedRoomTitle] = useState('')\n\tconst [PwdCheckModalState, setPwdCheckModalState] = useState(false);\n\n\tconst openPwdCheckModal = (title:string) => {\n\t\tsetPwdCheckModalState(true);\n\t\tsetClickedRoomTitle(title)\n\t}\n\tconst closePwdCheckModal = () => {\n\t\tsetPwdCheckModalState(false);\n\t}\n\n\tasync function enterPublicRoom(title:string) {\n\t\tawait axios.post('/Lobby/enter', {title:title, id:MyID, password:''})\n\t\tdocument.location.href = '/chat'\n\t\tsessionStorage.setItem('roomName', title)\n\t}\n\n\treturn (\n\t<>\n\t{data?.map(chatRoom=>\n\t\t<button type=\"button\" className=\"chatList\" onClick={() => {\n\t\t\tif (chatRoom.security === 'protected')\n\t\t\t\topenPwdCheckModal(chatRoom.title)\n\t\t\telse\n\t\t\t\tenterPublicRoom(chatRoom.title)\n\t\t}}>\n\t\t\t<span className=\"chatList-left\">\n\t\t\t\t<div className=\"chatList-num\">{chatRoom.num}</div>\n\t\t\t</span>\n\t\t\t<span className=\"lock\">\n\t\t\t\t{chatRoom.security != \"protected\" ? <img src={unlock} width=\"20\" height=\"20\"/> : <img src={lock} width=\"20\" height=\"20\"/>}\n\t\t\t</span>\n\t\t\t<span className=\"roomName\">\n\t\t\t\t{chatRoom.title}\n\t\t\t</span>\n\n\t\t</button>\n\t)}\n\t<PwdCheckModal open={PwdCheckModalState} close={closePwdCheckModal} chatRoomID={ClickedRoomTitle} MyID={MyID} />\n\t</>\n\t)\n}\n\nexport default ChatList"]},"metadata":{},"sourceType":"module"}