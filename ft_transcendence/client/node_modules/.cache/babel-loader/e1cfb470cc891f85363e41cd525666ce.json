{"ast":null,"code":"var _jsxFileName = \"/Users/sohndohyun/works/transcendence/client/src/Pong/Game.tsx\";\nimport React from 'react';\nimport Canvas from './Canvas';\nimport Ball from './Ball';\nimport Wall from './Wall';\nimport Player from './Player';\nimport GameObject from './GameObject';\nimport socket from './PongSocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.objs = void 0;\n    this.width = void 0;\n    this.height = void 0;\n    this.aname = void 0;\n    this.bname = void 0;\n    this.ball = void 0;\n    this.playerL = void 0;\n    this.playerR = void 0;\n    this.ballSpeed = void 0;\n    this.isLadder = void 0;\n    this.pos = void 0;\n    this.objs = [];\n    this.width = 800;\n    this.height = 450;\n    this.ball = new Ball(this, 20, 20, this.width / 2, this.height / 2);\n    this.playerL = new Player(this, 20, this.height / 4, 0, this.height / 5 * 2);\n    this.playerR = new Player(this, 20, this.height / 4, this.width - 20, this.height / 5 * 2);\n    this.state = {\n      SL: 0,\n      SR: 0\n    };\n    this.pos = this.props.dr;\n    this.aname = this.props.a;\n    this.bname = this.props.b;\n    this.isLadder = this.props.ladder;\n    this.ballSpeed = this.props.speed ? 700 : 500;\n    this.objs.push(this.playerL);\n    this.objs.push(this.playerR);\n    this.objs.push(new Wall(this, this.width, 20, 0, 0));\n    this.objs.push(new Wall(this, this.width, 20, 0, this.height - 20));\n    this.objs.push(new GameObject(this, 10, this.height, this.width / 2 - 5, 0));\n    this.objs.push(this.ball);\n  }\n\n  receivedMessage(message) {\n    console.log(message);\n  }\n\n  draw(ctx, dt) {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    for (let i = 0; i < this.objs.length; i++) this.objs[i].draw(ctx, dt);\n  }\n\n  onKeyDown(e) {\n    if (this.pos >= 2) return;\n    let mypl = this.pos === 0 ? this.playerL : this.playerR;\n\n    if (e.keyCode === 40 && mypl.dirY !== 1) {\n      socket.emit('Down', mypl.y);\n    } else if (e.keyCode === 38 && mypl.dirY !== -1) {\n      socket.emit('Up', mypl.y);\n    }\n  }\n\n  onKeyUp(e) {\n    if (this.pos >= 2) return;\n    let mypl = this.pos === 0 ? this.playerL : this.playerR;\n\n    if (e.keyCode === 40 || e.keyCode === 38) {\n      socket.emit('Stop', mypl.y);\n    }\n  }\n\n  onUp(e) {\n    if (e.who === 0) {\n      this.playerL.dirY = -1;\n      this.playerL.y = e.y;\n    } else if (e.who === 1) {\n      this.playerR.dirY = -1;\n      this.playerR.y = e.y;\n    }\n  }\n\n  onDown(e) {\n    if (e.who === 0) {\n      this.playerL.dirY = 1;\n      this.playerL.y = e.y;\n    } else if (e.who === 1) {\n      this.playerR.dirY = 1;\n      this.playerR.y = e.y;\n    }\n  }\n\n  onStop(e) {\n    if (e.who === 0) {\n      this.playerL.dirY = 0;\n      this.playerL.y = e.y;\n    } else if (e.who === 1) {\n      this.playerR.dirY = 0;\n      this.playerR.y = e.y;\n    }\n  }\n\n  onScored(e) {\n    this.setState(() => {\n      return {\n        SL: e.scoreL,\n        SR: e.scoreR\n      };\n    });\n    this.ball.start(this.ballSpeed, e.dirX, e.dirY);\n  }\n\n  onUpdate(e) {\n    this.ball.onUpdate(e);\n  }\n\n  onScoredL() {\n    if (this.pos === 0) {\n      socket.emit('Scored', 0);\n    }\n  }\n\n  onScoredR() {\n    if (this.pos === 0) {\n      socket.emit('Scored', 1);\n    }\n  }\n\n  render() {\n    const {\n      SL,\n      SR\n    } = this.state;\n    let str = `${this.isLadder ? \"LADDER\" : \"NORMAL\"} ${this.aname} ${SL} : ${SR} ${this.bname}`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: str\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n        game: this\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/Pong/Game.tsx"],"names":["React","Canvas","Ball","Wall","Player","GameObject","socket","Game","Component","constructor","props","objs","width","height","aname","bname","ball","playerL","playerR","ballSpeed","isLadder","pos","state","SL","SR","dr","a","b","ladder","speed","push","receivedMessage","message","console","log","draw","ctx","dt","clearRect","canvas","i","length","onKeyDown","e","mypl","keyCode","dirY","emit","y","onKeyUp","onUp","who","onDown","onStop","onScored","setState","scoreL","scoreR","start","dirX","onUpdate","onScoredL","onScoredR","render","str"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Canvas from './Canvas';\nimport Ball from './Ball';\nimport Wall from './Wall';\nimport Player from './Player';\nimport GameObject from './GameObject';\nimport socket from './PongSocket';\n\nexport interface Scored {\n    scoreL: number,\n    scoreR: number,\n    dirX: number,\n    dirY: number\n}\n\nexport interface Update {\n    x: number,\n    y: number,\n    dirX: number,\n    dirY: number\n}\n\nexport interface Moved {\n    who: number,\n    y: number\n}\n\nclass Game extends React.Component<any, any> {\n    objs: GameObject[];\n    width: number;\n    height: number;\n\n    aname: string;\n    bname: string;\n\n    ball: Ball;\n    playerL: Player;\n    playerR: Player;\n    ballSpeed: number;\n    isLadder : boolean;\n    pos: number;\n\n    constructor(props: {}) {\n        super(props);\n        this.objs = [];\n        this.width = 800;\n        this.height = 450;\n        this.ball = new Ball(this, 20, 20, this.width / 2, this.height / 2);\n        this.playerL = new Player(this, 20, this.height / 4, 0, this.height / 5 * 2);\n        this.playerR = new Player(this, 20, this.height / 4, this.width - 20, this.height / 5 * 2);\n\n        this.state = {\n            SL: 0,\n            SR: 0\n        };\n\n        this.pos = this.props.dr;\n        this.aname = this.props.a;\n        this.bname = this.props.b;\n        this.isLadder = this.props.ladder;\n        this.ballSpeed = this.props.speed ? 700 : 500;\n\n        this.objs.push(this.playerL);\n        this.objs.push(this.playerR);\n        this.objs.push(new Wall(this, this.width, 20, 0, 0));\n        this.objs.push(new Wall(this, this.width, 20, 0, this.height - 20));\n        this.objs.push(new GameObject(this, 10, this.height, this.width / 2 - 5, 0));\n        this.objs.push(this.ball);\n    }\n\n    receivedMessage(message: string) {\n        console.log(message);\n    }\n\n    draw(ctx: any, dt: number) {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        for (let i = 0; i < this.objs.length; i++)\n            this.objs[i].draw(ctx, dt);\n    }\n\n    onKeyDown(e: KeyboardEvent) {\n        if (this.pos >= 2)\n            return;\n\n        let mypl = this.pos === 0 ? this.playerL : this.playerR;\n        if (e.keyCode === 40 && mypl.dirY !== 1) {\n            socket.emit('Down', mypl.y);\n        }\n        else if (e.keyCode === 38 && mypl.dirY !== -1) {\n            socket.emit('Up', mypl.y);\n        }\n    }\n\n    onKeyUp(e: KeyboardEvent) {\n        if (this.pos >= 2)\n            return;\n\n        let mypl = this.pos === 0 ? this.playerL : this.playerR;\n        if (e.keyCode === 40 || e.keyCode === 38) {\n            socket.emit('Stop', mypl.y);\n        }\n    }\n\n    onUp(e: Moved) {\n        if (e.who === 0) {\n            this.playerL.dirY = -1;\n            this.playerL.y = e.y;\n        }\n        else if (e.who === 1) {\n            this.playerR.dirY = -1;\n            this.playerR.y = e.y;\n        }\n    }\n\n    onDown(e: Moved) {\n        if (e.who === 0) {\n            this.playerL.dirY = 1;\n            this.playerL.y = e.y;\n        }\n        else if (e.who === 1) {\n            this.playerR.dirY = 1;\n            this.playerR.y = e.y;\n        }\n    }\n\n    onStop(e: Moved) {\n        if (e.who === 0) {\n            this.playerL.dirY = 0;\n            this.playerL.y = e.y;\n        }\n        else if (e.who === 1) {\n            this.playerR.dirY = 0;\n            this.playerR.y = e.y;\n        }\n    }\n\n    onScored(e: Scored) {\n        this.setState(() => { return { SL: e.scoreL, SR: e.scoreR }; });\n\n        this.ball.start(this.ballSpeed, e.dirX, e.dirY);\n    }\n\n    onUpdate(e: Update) {\n        this.ball.onUpdate(e);\n    }\n\n    onScoredL() {\n        if (this.pos === 0) {\n            socket.emit('Scored', 0);\n        }\n    }\n\n    onScoredR() {\n        if (this.pos === 0) {\n            socket.emit('Scored', 1);\n        }\n    }\n\n    render() {\n        const { SL, SR } = this.state;\n\n        let str = `${this.isLadder ? \"LADDER\" : \"NORMAL\"} ${this.aname} ${SL} : ${SR} ${this.bname}`;\n\n        return (\n            <div>\n                <h1>{str}</h1>\n                <Canvas game={this} />\n            </div>\n        );\n    }\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}