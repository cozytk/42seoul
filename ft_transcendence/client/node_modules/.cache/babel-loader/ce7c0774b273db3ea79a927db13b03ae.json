{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import axios from\"axios\";import useSwr from'swr';import\"./styles/UserInfoModal.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfoModal=function UserInfoModal(props){var _data$history;var open=props.open,close=props.close,myID=props.myID,targetID=props.targetID;var fetcher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(url);case 2:res=_context.sent;return _context.abrupt(\"return\",res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetcher(_x){return _ref.apply(this,arguments);};}();var _useSwr=useSwr('/profile/'+myID+'/'+targetID,fetcher),data=_useSwr.data,error=_useSwr.error;function makeDM(){return _makeDM.apply(this,arguments);}function _makeDM(){_makeDM=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var chatRoomName;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(myID.localeCompare(targetID)<0)chatRoomName='DM_'+myID+'_'+targetID;else chatRoomName='DM_'+targetID+'_'+myID;_context2.next=3;return axios.put('/Lobby/chatCreate/'+chatRoomName,{password:'',owner_id:myID,security:'private'});case 3:document.location.href='/chat';sessionStorage.setItem('roomName',chatRoomName);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _makeDM.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\" \\xD7 \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:targetID}),/*#__PURE__*/_jsxs(\"span\",{className:\"num win-color\",children:[\"W \",data===null||data===void 0?void 0:data.win]}),/*#__PURE__*/_jsxs(\"span\",{className:\"num lose-color\",children:[\" \\xA0\\xA0 L \",data===null||data===void 0?void 0:data.lose]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:data===null||data===void 0?void 0:(_data$history=data.history)===null||_data$history===void 0?void 0:_data$history.map(function(match){return/*#__PURE__*/_jsxs(\"div\",{className:match.win?'matchHistory win-backColor':'matchHistory lose-backColor',children:[/*#__PURE__*/_jsx(\"span\",{className:\"match-left\",children:match.p2}),/*#__PURE__*/_jsx(\"span\",{className:match.win?'match-right win-color':'match-right lose-color',children:match.win?'Win':'Lose'})]});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:myID===targetID?/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",onClick:function onClick(){return document.location.href='/Admin/';},children:/*#__PURE__*/_jsx(\"b\",{children:\"Admin\"})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"onoffbtn\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"switch1\",name:\"switch1\",className:\"input__on-off\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"switch1\",className:\"label__on-off\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"marble\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on\",children:\"Friend\"}),/*#__PURE__*/_jsx(\"span\",{className:\"off\",children:\"Unfriend\"})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"onoffbtn\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"switch2\",name:\"switch2\",className:\"input__on-off\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"switch2\",className:\"label__on-off\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"marble\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on\",children:\"Unblock\"}),/*#__PURE__*/_jsx(\"span\",{className:\"off\",children:\"Block\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"btn button\",href:\"Game\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Game\"})}),/*#__PURE__*/_jsx(\"a\",{className:\"btn button dm-button\",onClick:makeDM,children:/*#__PURE__*/_jsx(\"b\",{children:\"DM\"})})]})]})})]}):null});};export default UserInfoModal;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/SideBar/UserInfoModal.tsx"],"names":["React","axios","useSwr","UserInfoModal","props","open","close","myID","targetID","fetcher","url","get","res","data","error","makeDM","localeCompare","chatRoomName","put","password","owner_id","security","document","location","href","sessionStorage","setItem","win","lose","history","map","match","p2"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from \"axios\";\nimport useSwr from 'swr';\nimport \"./styles/UserInfoModal.scss\";\n\nconst UserInfoModal = ( props: any ) => {\n\tconst { open, close, myID, targetID} = props;\n\n\tconst fetcher = async (url:string) => {\n\t\tconst res = await axios.get(url)\n\t\treturn res.data;\n\t}\n\tconst {data, error} = useSwr<{history:{win:boolean, p2:string}[] ,friend:boolean, block:boolean, win:number, lose:number}>('/profile/' + myID + '/' + targetID, fetcher)\n\n\tasync function makeDM(){\n\t\tif (myID.localeCompare(targetID) < 0)\n\t\t\tvar chatRoomName = 'DM_' + myID + '_' + targetID\n\t\telse\n\t\t\tvar chatRoomName = 'DM_' + targetID + '_' + myID\n\t\tawait axios.put('/Lobby/chatCreate/' + chatRoomName, {password:'', owner_id:myID, security:'private'})\n\t\tdocument.location.href = '/chat'\n\t\tsessionStorage.setItem('roomName', chatRoomName)\n\t}\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? (\n\t\t\t\t<section>\n\t\t\t\t\t<div className=\"head\">\n\t\t\t\t\t\t<button className=\"close\" onClick={close}> &times; </button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<div className=\"header\">\n\t\t\t\t\t\t\t<div className=\"name\">{targetID}</div>\n\t\t\t\t\t\t\t<span className=\"num win-color\">W {data?.win}</span>\n\t\t\t\t\t\t\t<span className=\"num lose-color\"> &nbsp;&nbsp; L {data?.lose}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t<div className=\"main\">\n\t\t\t\t\t\t\t{data?.history?.map(match=>\n\t\t\t\t\t\t\t<div className={match.win ? 'matchHistory win-backColor' : 'matchHistory lose-backColor'}>\n\t\t\t\t\t\t\t\t<span className='match-left'>{match.p2}</span>\n\t\t\t\t\t\t\t\t<span className={match.win ? 'match-right win-color' : 'match-right lose-color'}>{match.win ? 'Win' : 'Lose'}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t{myID === targetID ? \n\t\t\t\t\t\t<a className=\"btn button\" onClick={()=> document.location.href = '/Admin/'}><b>Admin</b></a>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<span className=\"onoffbtn\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"switch1\" name=\"switch1\" className=\"input__on-off\"/>\n\t\t\t\t\t\t\t<label htmlFor=\"switch1\" className=\"label__on-off\">\n\t\t\t\t\t\t\t\t<span className=\"marble\"></span>\n\t\t\t\t\t\t\t\t<span className=\"on\">Friend</span>\n\t\t\t\t\t\t\t\t<span className=\"off\">Unfriend</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"onoffbtn\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"switch2\" name=\"switch2\" className=\"input__on-off\"/>\n\t\t\t\t\t\t\t<label htmlFor=\"switch2\" className=\"label__on-off\">\n\t\t\t\t\t\t\t\t<span className=\"marble\"></span>\n\t\t\t\t\t\t\t\t<span className=\"on\">Unblock</span>\n\t\t\t\t\t\t\t\t<span className=\"off\">Block</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<a className=\"btn button\" href=\"Game\"><b>Game</b></a>\n\t\t\t\t\t\t\t<a className=\"btn button dm-button\" onClick={makeDM}><b>DM</b></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t) : null }\n\t\t</div>\n\t)\n}\n\nexport default UserInfoModal"]},"metadata":{},"sourceType":"module"}