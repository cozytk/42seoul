{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/jinkim/jin_bye/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/jinkim/jin_bye/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState,useEffect}from'react';import Game from'./Game';import socket from'./PongSocket';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var aname=\"a\";var bname=\"b\";var dr=0;var sbool=false;var lbool=false;var row=[];var Pong=function Pong(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),searching=_useState4[0],setSearching=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),connected=_useState6[0],setConnected=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),matched=_useState8[0],setMatched=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loada=_useState10[0],setloada=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),ladder=_useState12[0],setLadder=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),speed=_useState14[0],setSpeed=_useState14[1];useEffect(function(){socket.on(\"connect\",function(){console.log(\"connect\");setConnected(true);});socket.on(\"matched\",function(e){aname=e.a;bname=e.b;dr=e.dr;sbool=e.speed;lbool=e.ladder;setMatched(true);});socket.on(\"disconnect\",function(){setConnected(false);alert(\"disconnected!\");});socket.on(\"finish\",function(e){var name=e===0?aname:bname;row=[];setSearching(false);setMatched(false);alert(\"\".concat(name,\" win!\"));});socket.on(\"gameList\",function(e){row=[];var _iterator=_createForOfIteratorHelper(e),_step;try{var _loop=function _loop(){var g=_step.value;row.push(/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){socket.emit(\"Observe\",g.id);setSearching(true);},children:g.a+' vs '+g.b}));};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(loada)setloada(false);else setloada(true);});socket.on(\"cancel\",function(){setSearching(false);});},[loada]);var onChange=function onChange(e){setText(e.target.value);};var onSearch=function onSearch(){if(text==='')alert(\"need nickname!\");else if(connected){socket.emit('Join',{name:text,speed:speed,ladder:ladder});setSearching(true);console.log(\"join start!\");}else alert(\"not connected!\");};var onGameSearch=function onGameSearch(){if(connected){socket.emit('GameList');}else alert(\"not connected!\");};var onMathCancel=function onMathCancel(){if(!matched){socket.emit(\"Cancel\");}};if(!searching||!connected){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{onChange:onChange,value:text})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:ladder,onChange:function onChange(){setLadder(!ladder);}}),\"ladder\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:speed,onChange:function onChange(){setSpeed(!speed);}}),\"speed\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:onSearch,children:\"search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onGameSearch,children:\"show game list\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:row})]});}else{return!matched?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Matching ...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onMathCancel,children:\"cancel\"})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Game,{a:aname,b:bname,dr:dr,speed:sbool,ladder:lbool})});}};export default Pong;","map":{"version":3,"sources":["/Users/jinkim/jin_bye/client/src/Pong/Pong.tsx"],"names":["React","useState","useEffect","Game","socket","aname","bname","dr","sbool","lbool","row","Pong","text","setText","searching","setSearching","connected","setConnected","matched","setMatched","loada","setloada","ladder","setLadder","speed","setSpeed","on","console","log","e","a","b","alert","name","g","push","emit","id","onChange","target","value","onSearch","onGameSearch","onMathCancel"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport Game from './Game';\nimport socket from './PongSocket'\n\ninterface MatchData {\n    a: string,\n    b: string,\n    dr: number,\n    ladder: boolean,\n    speed: boolean\n}\n\ninterface GameNode {\n    id: number,\n    a: string,\n    b: string,\n    ladder: boolean,\n    speed: boolean\n}\n\nlet aname = \"a\";\nlet bname = \"b\";\nlet dr = 0;\nlet sbool = false;\nlet lbool = false;\nlet row: JSX.Element[] = [];\n\nconst Pong = () => {\n    const [text, setText] = useState('');\n    const [searching, setSearching] = useState(false);\n    const [connected, setConnected] = useState(false);\n    const [matched, setMatched] = useState(false);\n    const [loada, setloada] = useState(false);\n    const [ladder, setLadder] = useState(false);\n    const [speed, setSpeed] = useState(false);\n\n    useEffect(() => {\n        socket.on(\"connect\", () => {\n            console.log(\"connect\");\n            setConnected(true);\n        });\n\n        socket.on(\"matched\", (e: MatchData) => {\n            aname = e.a;\n            bname = e.b;\n            dr = e.dr;\n            sbool = e.speed;\n            lbool = e.ladder;\n            setMatched(true);\n        });\n\n        socket.on(\"disconnect\", () => {\n            setConnected(false);\n            alert(\"disconnected!\");\n        });\n\n        socket.on(\"finish\", (e: number) => {\n            let name = e === 0 ? aname : bname; \n            row = [];\n            setSearching(false);\n            setMatched(false);\n            alert(`${name} win!`);\n        });\n\n        socket.on(\"gameList\", (e: GameNode[]) => {\n            row = [];\n            for (let g of e) {\n                row.push(<button onClick={() => { socket.emit(\"Observe\", g.id); setSearching(true); }}>{g.a + ' vs ' + g.b}</button>);\n            }\n            if (loada)\n                setloada(false);\n            else\n                setloada(true);\n        });\n\n        socket.on(\"cancel\", () => {\n            setSearching(false);\n        });\n\n    }, [loada]);\n\n\n\n    const onChange = (e: any) => {\n        setText(e.target.value);\n    };\n\n    const onSearch = () => {\n        if (text === '')\n            alert(`need nickname!`);\n        else if (connected) {\n            socket.emit('Join', {name: text, speed: speed, ladder: ladder});\n            setSearching(true);\n            console.log(\"join start!\");\n        }\n        else\n            alert(`not connected!`);\n    };\n\n    const onGameSearch = () => {\n        if (connected) {\n            socket.emit('GameList');\n        }\n        else\n            alert(`not connected!`);\n    }\n\n    const onMathCancel = () => {\n        if (!matched){\n            socket.emit(\"Cancel\");\n        }\n    }\n\n    if (!searching || !connected) {\n        return (\n            <div>\n                <div>\n                    <div><input onChange={onChange} value={text} /></div>\n                    <div><label>\n                        <input type=\"checkbox\" checked={ladder} onChange={() => {setLadder(!ladder)}} />\n                        ladder\n                    </label>\n                    <label>\n                        <input type=\"checkbox\" checked={speed} onChange={() => {setSpeed(!speed)}} />\n                        speed\n                    </label></div>\n                    <div>\n                    <button onClick={onSearch}>search</button>\n                    <button onClick={onGameSearch}>show game list</button>\n                    </div>\n                </div>\n                <div>{row}</div>\n            </div>\n        );\n    }\n    else {\n        return !matched ? (\n            <div>\n                <div>Matching ...</div>\n                <button onClick={onMathCancel}>cancel</button>\n            </div>\n        ) : (\n            <div>\n                <Game a={aname} b={bname} dr={dr} speed={sbool} ladder={lbool} />\n            </div>\n        );\n    }\n}\n\nexport default Pong;\n"]},"metadata":{},"sourceType":"module"}