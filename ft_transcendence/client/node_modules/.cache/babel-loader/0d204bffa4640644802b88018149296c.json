{"ast":null,"code":"var _jsxFileName = \"/goinfre/jinkim/bye_blackhole/client/src/Chat/RoomList.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport \"./styles/RoomList.scss\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MakeRoomModal from './MakeRoomModal';\nimport PwRoomModal from './PwRoomModal';\nimport NoEntryModal from './NoEntryModal';\nimport axios from 'axios';\nimport lock_icon from '../Images/private.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RoomList = ({\n  userName,\n  roomName,\n  setRoomName\n}) => {\n  _s();\n\n  const handleRoomNameChange = useCallback(e => {\n    setRoomName(e.target.value);\n    checkedRoomInfo(e.target.value);\n  }, []); //password\n\n  const [pw, setPw] = useState(\"\");\n  const handPwChange = useCallback(e => {\n    setPw(e.target.value);\n  }, []);\n  const [bChecked, setChecked] = useState(false);\n  const checkHandler = useCallback(e => {\n    setChecked(!bChecked);\n  }, [bChecked]); //makeRoomModal\n\n  const [makeRoomModalOpen, setMakeRoomModalOpen] = useState(false);\n\n  const openMakeRoomModal = () => {\n    setMakeRoomModalOpen(true);\n  };\n\n  const closeMakeRoomModal = () => {\n    setMakeRoomModalOpen(false);\n  }; //pwRoomModal\n\n\n  const [pwRoomModalOpen, setPwRoomModalOpen] = useState(false);\n\n  const openPwRoomModal = () => {\n    setPwRoomModalOpen(true);\n  };\n\n  const closePwRoomModal = () => {\n    setPwRoomModalOpen(false);\n    setTryAgain(false);\n  }; //NoEntryModal\n\n\n  const [noEntryModalOpen, setNoEntryModalOpen] = useState(false);\n\n  const openNoEntryModal = () => {\n    setNoEntryModalOpen(true);\n  };\n\n  const closeNoEntryModal = () => {\n    setNoEntryModalOpen(false);\n  };\n\n  sessionStorage.setItem(\"roomName\", roomName);\n  const [roomListInfo, setRoomListInfo] = useState();\n  useEffect(() => {\n    getRoomList();\n  }, []);\n\n  async function makeRoom() {\n    userName = userName ? userName : sessionStorage.getItem(\"userName\");\n    await axios.post('/RoomList', {\n      id: roomName,\n      password: pw,\n      owner_id: userName\n    });\n  }\n\n  async function getRoomList() {\n    const res = await axios.get('/RoomList/list');\n    setRoomListInfo(res.data); //setRoomListInfo([{id:\"r1\", password:\"1234\", owner_id:\"oid1\", num:1}, {id:\"r1\", password:\"\", owner_id:\"oid1\", num:1}])\n  }\n\n  const [roomInfo, setRoomInfo] = useState();\n\n  function checkedRoomInfo(roomId) {\n    roomListInfo === null || roomListInfo === void 0 ? void 0 : roomListInfo.map(room => {\n      if (room.id === roomId) setRoomInfo(room);\n    });\n  }\n\n  async function enterRoom() {\n    await axios.patch('/RoomList/incNum/' + roomName);\n    document.location.href = '/Chat';\n  }\n\n  async function enterTheRoom() {\n    if (roomInfo) {\n      if (roomInfo.num >= 10) //입장불가 modal\n        openNoEntryModal();else if (roomInfo.num < 10 && roomInfo.password == \"\") //페이지 이동\n        enterRoom();else //비밀번호 입력 modal\n        openPwRoomModal();\n    }\n  } //input password check\n\n\n  const [inputPw, setInputPw] = useState();\n\n  const handleInputPwChange = e => {\n    setInputPw(e.target.value);\n  }; // password try again\n\n\n  const [tryAgain, setTryAgain] = useState(false);\n\n  async function enterPrivateRoom() {\n    if (inputPw === (roomInfo === null || roomInfo === void 0 ? void 0 : roomInfo.password)) enterRoom();else setTryAgain(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"RoomList-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"makeRoom-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn btn-primary btn-sm makeRoom\",\n        onClick: openMakeRoomModal,\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"\\uBC29 \\uB9CC\\uB4E4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 79\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(MakeRoomModal, {\n        open: makeRoomModalOpen,\n        close: closeMakeRoomModal,\n        header: \"\\uBC29 \\uB9CC\\uB4E4\\uAE30\",\n        makeRoom: makeRoom,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"\\xA0\\uBC29 \\uC81C\\uBAA9\\xA0\\xA0\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: handleRoomNameChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: bChecked,\n            onChange: e => checkHandler(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 18\n          }, this), \" private\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 5\n        }, this), bChecked ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkbox-pw\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: handPwChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"middle\",\n      children: roomListInfo === null || roomListInfo === void 0 ? void 0 : roomListInfo.map(room => /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"room\",\n          value: room.id,\n          onChange: handleRoomNameChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: room.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"lock-image\",\n            children: room.password != \"\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: lock_icon,\n              width: \"20\",\n              height: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 59\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"room-num\",\n            children: [\"10/\", room.num]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Join-button\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn btn-dark\",\n        onClick: enterTheRoom,\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"\\uC785\\uC7A5\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(NoEntryModal, {\n        open: noEntryModalOpen,\n        close: closeNoEntryModal,\n        children: \"\\uC815\\uC6D0\\uC774 \\uB2E4 \\uCC3C\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(PwRoomModal, {\n        open: pwRoomModalOpen,\n        close: closePwRoomModal,\n        header: \"\\uC785\\uC7A5\\uD558\\uAE30\",\n        enterRoom: enterPrivateRoom,\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            onChange: handleInputPwChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 6\n          }, this), tryAgain ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tryAgain\",\n            children: \"\\xA0\\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD558\\uC2ED\\uC2DC\\uC624\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 18\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RoomList, \"W1L/F2Tdo0K1nQAfk4Sfqb3ohmg=\");\n\n_c = RoomList;\nexport default RoomList;\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomList\");","map":{"version":3,"sources":["/goinfre/jinkim/bye_blackhole/client/src/Chat/RoomList.tsx"],"names":["React","useEffect","useState","useCallback","MakeRoomModal","PwRoomModal","NoEntryModal","axios","lock_icon","RoomList","userName","roomName","setRoomName","handleRoomNameChange","e","target","value","checkedRoomInfo","pw","setPw","handPwChange","bChecked","setChecked","checkHandler","makeRoomModalOpen","setMakeRoomModalOpen","openMakeRoomModal","closeMakeRoomModal","pwRoomModalOpen","setPwRoomModalOpen","openPwRoomModal","closePwRoomModal","setTryAgain","noEntryModalOpen","setNoEntryModalOpen","openNoEntryModal","closeNoEntryModal","sessionStorage","setItem","roomListInfo","setRoomListInfo","getRoomList","makeRoom","getItem","post","id","password","owner_id","res","get","data","roomInfo","setRoomInfo","roomId","map","room","enterRoom","patch","document","location","href","enterTheRoom","num","inputPw","setInputPw","handleInputPwChange","tryAgain","enterPrivateRoom"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useCallback, VFC} from \"react\";\nimport \"./styles/RoomList.scss\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MakeRoomModal from './MakeRoomModal';\nimport PwRoomModal from './PwRoomModal';\nimport NoEntryModal from './NoEntryModal'\nimport axios from 'axios';\nimport lock_icon from '../Images/private.png'\n\ninterface HomeObj{\n\tuserName:any,\n\troomName:any,\n\tsetRoomName:(value:any)=>void,\n}\n\nconst RoomList : VFC<HomeObj>  = ({ userName, roomName, setRoomName}) => {\n  const handleRoomNameChange = useCallback((e:any) => {\n    setRoomName(e.target.value);\n\tcheckedRoomInfo(e.target.value)\n  }, []);\n\n  //password\n  const [pw, setPw] = useState(\"\");\n  const handPwChange = useCallback((e:any) => {\n    setPw(e.target.value);\n  }, []);\n\n  const [bChecked, setChecked] = useState(false);\n  const checkHandler = useCallback( (e:any) => {\n    setChecked(!bChecked);\n  },[bChecked]);\n\n\n  //makeRoomModal\n  const [makeRoomModalOpen, setMakeRoomModalOpen] = useState(false);\n  const openMakeRoomModal = () => {\n\tsetMakeRoomModalOpen(true);\n  }\n  const closeMakeRoomModal = () => {\n\tsetMakeRoomModalOpen(false);\n  }\n  //pwRoomModal\n  const [pwRoomModalOpen, setPwRoomModalOpen] = useState(false);\n  const openPwRoomModal = () => {\n\tsetPwRoomModalOpen(true);\n  }\n  const closePwRoomModal = () => {\n\tsetPwRoomModalOpen(false);\n\tsetTryAgain(false)\n  }\n  //NoEntryModal\n  const [noEntryModalOpen, setNoEntryModalOpen] = useState(false);\n  const openNoEntryModal = () => {\n\tsetNoEntryModalOpen(true);\n  }\n  const closeNoEntryModal = () => {\n\tsetNoEntryModalOpen(false);\n  }\n\n  sessionStorage.setItem(\"roomName\", roomName);\n\n  const [roomListInfo, setRoomListInfo] = useState<{id:string, password:string, owner_id:string, num:number}[]>();\n\n  useEffect(() => {\n\tgetRoomList()\n  }, [])\n\n  async function makeRoom(){\n\t  userName = userName ? userName : sessionStorage.getItem(\"userName\")\n\t  await axios.post('/RoomList', {id:roomName, password:pw, owner_id:userName});\n  }\n\n  async function getRoomList() {\n\t  const res = await axios.get('/RoomList/list');\n\t  setRoomListInfo(res.data)\n\t  //setRoomListInfo([{id:\"r1\", password:\"1234\", owner_id:\"oid1\", num:1}, {id:\"r1\", password:\"\", owner_id:\"oid1\", num:1}])\n  }\n\n\n  const [roomInfo, setRoomInfo] = useState<{id:String, password:String, owner_id:String, num:number}>();\n\n  function checkedRoomInfo(roomId:string)\n  {\n\t  roomListInfo?.map(room=>{\n\t\t  if (room.id === roomId)\n\t\t  setRoomInfo(room)\n\t\t})\n  }\n\n\n  async function enterRoom()\n  {\n\tawait axios.patch('/RoomList/incNum/' + roomName)\n\tdocument.location.href = '/Chat';\n  }\n\n  async function enterTheRoom() {\n\t  if (roomInfo)\n\t  {\n\t\t\tif (roomInfo.num >= 10) //입장불가 modal\n\t\t\t\topenNoEntryModal()\n\t\t\telse if (roomInfo.num < 10 && roomInfo.password == \"\") //페이지 이동\n\t\t\t\tenterRoom()\n\t\t\telse //비밀번호 입력 modal\n\t\t\t\topenPwRoomModal()\n\t\t}\n\t}\n\n\t//input password check\n\tconst [inputPw, setInputPw] = useState();\n\tconst handleInputPwChange = (e:any) => {\n\t\tsetInputPw(e.target.value);\n\t};\n\n\t// password try again\n\tconst [tryAgain, setTryAgain] = useState(false);\n\n\tasync function enterPrivateRoom() {\n\t\tif (inputPw === roomInfo?.password)\n\t\t\tenterRoom()\n\t\telse\n\t\t\tsetTryAgain(true);\n\t}\n\n\n  return (\n    <div className=\"RoomList-container\">\n\t\t<div className=\"makeRoom-box\">\n\t\t\t<a className=\"btn btn-primary btn-sm makeRoom\" onClick={openMakeRoomModal}><b>방 만들기</b></a>\n\t\t\t<MakeRoomModal open={makeRoomModalOpen} close={closeMakeRoomModal} header=\"방 만들기\" makeRoom={makeRoom}>\n\t\t\t\t<label >\n\t\t\t\t\t<b>&nbsp;방 제목&nbsp;&nbsp;&nbsp;</b>\n\t\t\t\t\t<input onChange={handleRoomNameChange}></input>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t&nbsp;&nbsp;<input type=\"checkbox\" checked={bChecked} onChange={(e) => checkHandler(e)} ></input> private\n\t\t\t\t</label>\n\t\t\t\t{bChecked ?\n\t\t\t\t\t<div className=\"checkbox-pw\">\n\t\t\t\t\t<b>비밀번호&nbsp;</b>\n\t\t\t\t\t<input type=\"password\" onChange={handPwChange}></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</MakeRoomModal>\n\t\t</div>\n\t\t<div className=\"middle\">\n\t\t\t{roomListInfo?.map(room=>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"room\" value={room.id} onChange={handleRoomNameChange}/>\n\t\t\t\t\t<div className=\"box\">\n\t\t\t\t\t\t<div>{room.id}</div>\n\t\t\t\t\t\t<span className=\"lock-image\">{room.password != \"\" ? <img src={lock_icon} width=\"20\" height=\"20\"></img> : null}</span>\n\t\t\t\t\t\t<span className=\"room-num\">10/{room.num}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t)}\n\t\t</div>\n\t\t<div className=\"Join-button\">\n\t\t\t<a className=\"btn btn-dark\" onClick={enterTheRoom}><b>입장하기</b></a>\n\t\t\t<NoEntryModal open={noEntryModalOpen} close={closeNoEntryModal} >\n\t\t\t\t정원이 다 찼습니다.\n\t\t\t</NoEntryModal>\n\t\t\t<PwRoomModal open={pwRoomModalOpen} close={closePwRoomModal} header=\"입장하기\" enterRoom={enterPrivateRoom}>\n\t\t\t\t<label>\n\t\t\t\t\t<b>비밀번호&nbsp;</b>\n\t\t\t\t\t<input type=\"password\" onChange={handleInputPwChange}></input>\n\t\t\t\t\t{tryAgain ? <span className=\"tryAgain\">&nbsp;다시 시도하십시오</span> : null}\n\t\t\t\t</label>\n\t\t\t</PwRoomModal>\n\t\t</div>\n    </div>\n  );\n};\n\nexport default RoomList;"]},"metadata":{},"sourceType":"module"}