{"ast":null,"code":"var _jsxFileName = \"/Users/sohndohyun/works/transcendence/client/src/Lobby/Lobby.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport './styles/Lobby.scss';\nimport plusbtn from '../Images/plusbutton.png';\nimport SideBar from '../SideBar/SideBar';\nimport GameListModal from './GameListModal';\nimport ChatListModal from './ChatListModal';\nimport ChatList from './ChatList';\nimport GameList from './GameList';\nimport socket from '../Pong/PongSocket';\nimport Game from '../Pong/Game';\nimport GameResult from './GameResult';\nimport MatchFailedModal from './MatchFailedModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet aname = 'a';\nlet bname = 'b';\nlet dr = 0;\nlet sbool = false;\nlet lbool = false;\nlet name;\n\nconst Lobby = () => {\n  _s();\n\n  const [MyID, setMyID] = useState('');\n  const [connected, setConnected] = useState(false);\n  const [matched, setMatched] = useState(false);\n  const [loada, setloada] = useState(false);\n  const [gameList, setGameList] = useState([]);\n  const [gameResult, setGameResult] = useState(false);\n  const [MatchFailed, setMatchFailed] = useState(false); //  const [DirectGameTarget, setDirectGameTarget] = useState('');\n\n  useEffect(() => {\n    const id = sessionStorage.getItem('nickname');\n    if (id) setMyID(id);\n    /*\n    const gameTarget = sessionStorage.getItem('directGame');\n    if (gameTarget) {\n      setDirectGameTarget(gameTarget);\n      openDirectGameModal();\n      sessionStorage.removeItem('directGame');\n    }\n    */\n  });\n  useEffect(() => {\n    if (connected && MyID) {\n      socket.emit('Con', MyID);\n    }\n\n    socket.emit('GameList');\n  }, [connected, MyID]);\n  useEffect(() => {\n    socket.on('connect', () => {\n      setConnected(true);\n    });\n    socket.on('disconnect', () => {\n      setConnected(false);\n    });\n    socket.on('match_failed', () => {\n      setMatchFailed(true);\n    });\n    socket.on('matched', e => {\n      aname = e.a;\n      bname = e.b;\n      dr = e.dr;\n      sbool = e.speed;\n      lbool = e.ladder;\n      setMatched(true);\n      setGameListModalState(false);\n    });\n    socket.on('finish', e => {\n      name = e === 0 ? aname : bname;\n      setMatched(false);\n      setGameResult(true);\n    });\n    socket.on('gameList', e => {\n      setGameList(e);\n      if (loada) setloada(false);else setloada(true);\n    });\n  }, [loada]);\n\n  const onMathCancel = () => {\n    if (!matched) {\n      socket.emit('Cancel');\n    }\n  }; //game list modal\n\n\n  const [GameListModalState, setGameListModalState] = useState(false);\n\n  const openGameListModal = () => {\n    setGameListModalState(true);\n  };\n\n  const closeGameListModal = () => {\n    onMathCancel();\n    setGameListModalState(false);\n  }; //chat list modal\n\n\n  const [ChatListModalState, setChatListModalState] = useState(false);\n\n  const openChatListModal = () => {\n    setChatListModalState(true);\n  };\n\n  const closeChatListModal = () => {\n    setChatListModalState(false);\n  }; //gameresult modal\n\n\n  const closeGameResult = () => setGameResult(false); //match failed modal\n\n\n  const closeMatchFailedModal = () => {\n    setMatchFailed(false);\n    if (GameListModalState) closeGameListModal();\n  };\n\n  return matched ? /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"App-Container\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"App-Left\",\n      children: /*#__PURE__*/_jsxDEV(Game, {\n        a: aname,\n        b: bname,\n        dr: dr,\n        speed: sbool,\n        ladder: lbool\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"App-Right\",\n      children: /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MatchFailedModal, {\n      open: MatchFailed,\n      close: closeMatchFailedModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"App-Container\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"App-Left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listName\",\n          children: [\"Game\", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"plusbtn\",\n            onClick: openGameListModal,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: plusbtn,\n              width: \"30\",\n              height: \"30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GameListModal, {\n          open: GameListModalState,\n          close: closeGameListModal,\n          MyID: MyID,\n          connected: connected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GameList, {\n          gameList: gameList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listName\",\n          children: [\"Chat\", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"plusbtn\",\n            onClick: openChatListModal,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: plusbtn,\n              width: \"30\",\n              height: \"30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChatListModal, {\n          open: ChatListModalState,\n          close: closeChatListModal,\n          MyID: MyID\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChatList, {\n          MyID: MyID\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"App-Right\",\n      children: /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GameResult, {\n      name: name,\n      open: gameResult,\n      close: closeGameResult\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MatchFailedModal, {\n      open: MatchFailed,\n      close: closeMatchFailedModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Lobby, \"RuFxubFMpyuiZ9ywljgLMFtFp30=\");\n\n_c = Lobby;\nexport default Lobby;\n\nvar _c;\n\n$RefreshReg$(_c, \"Lobby\");","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/Lobby/Lobby.tsx"],"names":["useEffect","useState","plusbtn","SideBar","GameListModal","ChatListModal","ChatList","GameList","socket","Game","GameResult","MatchFailedModal","aname","bname","dr","sbool","lbool","name","Lobby","MyID","setMyID","connected","setConnected","matched","setMatched","loada","setloada","gameList","setGameList","gameResult","setGameResult","MatchFailed","setMatchFailed","id","sessionStorage","getItem","emit","on","e","a","b","speed","ladder","setGameListModalState","onMathCancel","GameListModalState","openGameListModal","closeGameListModal","ChatListModalState","setChatListModalState","openChatListModal","closeChatListModal","closeGameResult","closeMatchFailedModal"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { useEffect, useState, useCallback } from 'react';\nimport './styles/Lobby.scss';\nimport plusbtn from '../Images/plusbutton.png';\nimport SideBar from '../SideBar/SideBar';\nimport GameListModal from './GameListModal';\nimport ChatListModal from './ChatListModal';\nimport ChatList from './ChatList';\nimport GameList from './GameList';\nimport socket from '../Pong/PongSocket';\nimport { GameNode } from './IGameNode';\nimport Game from '../Pong/Game';\nimport GameResult from './GameResult';\nimport MatchFailedModal from './MatchFailedModal'\n\nexport interface MatchData {\n  a: string;\n  b: string;\n  dr: number;\n  ladder: boolean;\n  speed: boolean;\n}\n\nlet aname = 'a';\nlet bname = 'b';\nlet dr = 0;\nlet sbool = false;\nlet lbool = false;\nlet name: string;\n\nconst Lobby = () => {\n  const [MyID, setMyID] = useState('');\n  const [connected, setConnected] = useState(false);\n  const [matched, setMatched] = useState(false);\n  const [loada, setloada] = useState(false);\n  const [gameList, setGameList] = useState<GameNode[]>([]);\n  const [gameResult, setGameResult] = useState(false);\n  const [MatchFailed, setMatchFailed] = useState(false);\n//  const [DirectGameTarget, setDirectGameTarget] = useState('');\n\n  useEffect(() => {\n    const id = sessionStorage.getItem('nickname');\n    if (id) setMyID(id);\n\n    /*\n    const gameTarget = sessionStorage.getItem('directGame');\n    if (gameTarget) {\n      setDirectGameTarget(gameTarget);\n      openDirectGameModal();\n      sessionStorage.removeItem('directGame');\n    }\n    */\n  });\n\n  useEffect(() => {\n    if (connected && MyID) {\n      socket.emit('Con', MyID);\n    }\n    socket.emit('GameList');\n  }, [connected, MyID]);\n\n  useEffect(() => {\n    socket.on('connect', () => {\n      setConnected(true);\n    });\n\n    socket.on('disconnect', () => {\n      setConnected(false);\n    });\n\n    socket.on('match_failed', () => {\n\t\tsetMatchFailed(true)\n    });\n\n    socket.on('matched', (e: MatchData) => {\n      aname = e.a;\n      bname = e.b;\n      dr = e.dr;\n      sbool = e.speed;\n      lbool = e.ladder;\n      setMatched(true);\n      setGameListModalState(false);\n    });\n\n    socket.on('finish', (e: number) => {\n      name = e === 0 ? aname : bname;\n      setMatched(false);\n      setGameResult(true);\n    });\n\n    socket.on('gameList', (e: GameNode[]) => {\n      setGameList(e);\n      if (loada) setloada(false);\n      else setloada(true);\n    });\n  }, [loada]);\n\n  const onMathCancel = () => {\n    if (!matched) {\n      socket.emit('Cancel');\n    }\n  };\n\n  //game list modal\n  const [GameListModalState, setGameListModalState] = useState(false);\n  const openGameListModal = () => {\n    setGameListModalState(true);\n  };\n  const closeGameListModal = () => {\n    onMathCancel();\n    setGameListModalState(false);\n  };\n\n  //chat list modal\n  const [ChatListModalState, setChatListModalState] = useState(false);\n  const openChatListModal = () => {\n    setChatListModalState(true);\n  };\n  const closeChatListModal = () => {\n    setChatListModalState(false);\n  };\n\n  //gameresult modal\n  const closeGameResult = () => setGameResult(false);\n\n  //match failed modal\n  const closeMatchFailedModal = () => {\n\t  setMatchFailed(false)\n\t  if (GameListModalState) closeGameListModal()\n  }\n\n  return matched ? (\n    <div id=\"App-Container\">\n      <span className=\"App-Left\">\n        <Game a={aname} b={bname} dr={dr} speed={sbool} ladder={lbool} />\n      </span>\n      <span className=\"App-Right\">\n        <SideBar />\n      </span>\n\t  <MatchFailedModal open={MatchFailed} close={closeMatchFailedModal} />\n    </div>\n  ) : (\n    <div id=\"App-Container\">\n      <span className=\"App-Left\">\n        <div className=\"list-box\">\n          <div className=\"listName\">\n            Game\n            <button\n              type=\"button\"\n              className=\"plusbtn\"\n              onClick={openGameListModal}\n            >\n              <img src={plusbtn} width=\"30\" height=\"30\" />\n            </button>\n          </div>\n          <GameListModal\n            open={GameListModalState}\n            close={closeGameListModal}\n            MyID={MyID}\n            connected={connected}\n          />\n          <hr />\n          <GameList gameList={gameList} />\n        </div>\n\n        <div className=\"list-box\">\n          <div className=\"listName\">\n            Chat\n            <button\n              type=\"button\"\n              className=\"plusbtn\"\n              onClick={openChatListModal}\n            >\n              <img src={plusbtn} width=\"30\" height=\"30\" />\n            </button>\n          </div>\n          <ChatListModal\n            open={ChatListModalState}\n            close={closeChatListModal}\n            MyID={MyID}\n          />\n          <hr />\n          <ChatList MyID={MyID} />\n        </div>\n      </span>\n      <span className=\"App-Right\">\n        <SideBar />\n      </span>\n      <GameResult name={name} open={gameResult} close={closeGameResult} />\n\t  <MatchFailedModal open={MatchFailed} close={closeMatchFailedModal} />\n    </div>\n  );\n};\n\nexport default Lobby;\n"]},"metadata":{},"sourceType":"module"}