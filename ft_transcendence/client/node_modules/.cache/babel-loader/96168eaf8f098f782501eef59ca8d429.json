{"ast":null,"code":"var _jsxFileName = \"/Users/sohndohyun/works/transcendence/client/src/Auth/Auth.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport './styles/Auth.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Auth = () => {\n  _s();\n\n  const [IntraID, setIntraID] = useState('');\n  const [AuthCode, setAuthCode] = useState('');\n  const [WrongCode, setWrongCode] = useState(false);\n  useEffect(() => {\n    const url = window.location.href.split('?');\n\n    if (url[1]) {\n      const intra_id = url[1].split('=');\n\n      if (intra_id[0] === 'intra_id') {\n        setIntraID(intra_id[1]);\n        sessionStorage.setItem('intraID', intra_id[1]);\n      }\n    }\n  });\n\n  const handleAuthCodeChange = e => {\n    setAuthCode(e.target.value);\n  };\n\n  const authCheck = async () => {\n    const res = await axios.post('/log/2-factor-auth', {\n      intra_id: IntraID,\n      auth_value: AuthCode\n    });\n\n    if (res.data.auth_result) {\n      sessionStorage.setItem('2auth', \"true\");\n\n      if (res.data.id) {\n        sessionStorage.setItem(\"nickname\", res.data.id);\n        document.location.href = \"/lobby\";\n      } else document.location.href = \"/admin\";\n    } else {\n      setWrongCode(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-comment\",\n      children: [IntraID, \"@student.42seoul.kr\\uB85C \\uBA54\\uC77C\\uC774 \\uBC1C\\uC1A1\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\\uC778\\uC99D \\uCF54\\uB4DC\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n        onChange: handleAuthCodeChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: authCheck,\n        className: \"auth-btn\",\n        children: \"\\uD655\\uC778\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }, this), WrongCode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrong-code\",\n      children: \"\\uC798\\uBABB\\uB41C \\uCF54\\uB4DC\\uC785\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 2\n  }, this);\n};\n\n_s(Auth, \"4lXgZ8cwGh0oENvOXCLil81dMUk=\");\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/sohndohyun/works/transcendence/client/src/Auth/Auth.tsx"],"names":["axios","React","useEffect","useState","Auth","IntraID","setIntraID","AuthCode","setAuthCode","WrongCode","setWrongCode","url","window","location","href","split","intra_id","sessionStorage","setItem","handleAuthCodeChange","e","target","value","authCheck","res","post","auth_value","data","auth_result","id","document"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,oBAAP;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AAElB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BL,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,KAAD,CAA1C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMS,GAAG,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,CAAZ;;AACA,QAAIJ,GAAG,CAAC,CAAD,CAAP,EACA;AACC,YAAMK,QAAQ,GAAGL,GAAG,CAAC,CAAD,CAAH,CAAOI,KAAP,CAAa,GAAb,CAAjB;;AACA,UAAIC,QAAQ,CAAC,CAAD,CAAR,KAAgB,UAApB,EACA;AACCV,QAAAA,UAAU,CAACU,QAAQ,CAAC,CAAD,CAAT,CAAV;AACAC,QAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,EAAkCF,QAAQ,CAAC,CAAD,CAA1C;AACA;AACD;AACD,GAXQ,CAAT;;AAaA,QAAMG,oBAAoB,GAAIC,CAAD,IAAW;AACvCZ,IAAAA,WAAW,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AACA,GAFD;;AAIA,QAAMC,SAAS,GAAG,YAAW;AAC5B,UAAMC,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAW,oBAAX,EAAiC;AAClDT,MAAAA,QAAQ,EAAEX,OADwC;AAElDqB,MAAAA,UAAU,EAAEnB;AAFsC,KAAjC,CAAlB;;AAKA,QAAIiB,GAAG,CAACG,IAAJ,CAASC,WAAb,EACA;AACCX,MAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgC,MAAhC;;AACA,UAAIM,GAAG,CAACG,IAAJ,CAASE,EAAb,EACA;AACCZ,QAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCM,GAAG,CAACG,IAAJ,CAASE,EAA5C;AACAC,QAAAA,QAAQ,CAACjB,QAAT,CAAkBC,IAAlB,GAAuB,QAAvB;AACA,OAJD,MAMCgB,QAAQ,CAACjB,QAAT,CAAkBC,IAAlB,GAAuB,QAAvB;AACD,KAVD,MAYA;AACCJ,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;AACD,GArBD;;AAwBA,sBACA;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA,4BACC;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,iBACEL,OADF;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,eAIC;AAAA,8BACC;AAAO,QAAA,WAAW,EAAC,sEAAnB;AAAmC,QAAA,QAAQ,EAAEc;AAA7C;AAAA;AAAA;AAAA;AAAA,cADD,eAEC;AAAQ,QAAA,OAAO,EAAEI,SAAjB;AAA4B,QAAA,SAAS,EAAC,UAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD;AAAA;AAAA;AAAA;AAAA;AAAA,YAJD,EAQEd,SAAS,gBACT;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADS,GAIP,IAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAkBA,CAjED;;GAAML,I;;KAAAA,I;AAmEN,eAAeA,IAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport './styles/Auth.scss'\n\nconst Auth = () => {\n\n\tconst [IntraID, setIntraID] = useState('')\n\tconst [AuthCode, setAuthCode] = useState('')\n\tconst [WrongCode, setWrongCode] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst url = window.location.href.split('?')\n\t\tif (url[1])\n\t\t{\n\t\t\tconst intra_id = url[1].split('=')\n\t\t\tif (intra_id[0] === 'intra_id')\n\t\t\t{\n\t\t\t\tsetIntraID(intra_id[1])\n\t\t\t\tsessionStorage.setItem('intraID', intra_id[1])\n\t\t\t}\n\t\t}\n\t})\n\n\tconst handleAuthCodeChange = (e:any) => {\n\t\tsetAuthCode(e.target.value);\n\t};\n\n\tconst authCheck = async() => {\n\t\tconst res = await axios.post('/log/2-factor-auth', {\n\t\t\tintra_id: IntraID,\n\t\t\tauth_value: AuthCode\n\t\t})\n\n\t\tif (res.data.auth_result)\n\t\t{\n\t\t\tsessionStorage.setItem('2auth', \"true\")\n\t\t\tif (res.data.id)\n\t\t\t{\n\t\t\t\tsessionStorage.setItem(\"nickname\", res.data.id);\n\t\t\t\tdocument.location.href=\"/lobby\"\n\t\t\t}\n\t\t\telse\n\t\t\t\tdocument.location.href=\"/admin\"\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetWrongCode(true)\n\t\t}\n\t}\n\t\n\n\treturn (\n\t<div className=\"auth-box\">\n\t\t<div className=\"auth-comment\">\n\t\t\t{IntraID}@student.42seoul.kr로 메일이 발송되었습니다.\n\t\t</div>\n\t\t<div>\n\t\t\t<input placeholder=\"인증 코드를 입력해주세요\" onChange={handleAuthCodeChange}/>\n\t\t\t<button onClick={authCheck} className=\"auth-btn\">확인</button>\n\t\t</div>\n\t\t{WrongCode ? \n\t\t\t<div className=\"wrong-code\">\n\t\t\t\t잘못된 코드입니다.\n\t\t\t</div>\n\t\t\t: null\n\t\t}\n\t</div>\n\t)\n\n}\n\nexport default Auth"]},"metadata":{},"sourceType":"module"}