{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import useSwr from'swr';import{useEffect,useState}from\"react\";import\"./styles/SideBar.scss\";import{findImg}from'../Images/Images';import UserInfoModal from\"./UserInfoModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SideBar=function SideBar(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),MyID=_useState2[0],setMyID=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),MyIcon=_useState4[0],setMyIcon=_useState4[1];useEffect(function(){var id=sessionStorage.getItem('nickname');var icon=sessionStorage.getItem('icon');if(id)setMyID(id);if(icon)setMyIcon(icon);});//UserInfoModal\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),TargetID=_useState6[0],setTargetID=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),profile=_useState8[0],setProfile=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),UserInfoModalState=_useState10[0],setUserInfoModalState=_useState10[1];var openUserInfoModal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setUserInfoModalState(true);setTargetID(id);_context.t0=setProfile;_context.next=5;return axios.get('/profile/'+MyID+'/'+id);case 5:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 7:case\"end\":return _context.stop();}}},_callee);}));return function openUserInfoModal(_x){return _ref.apply(this,arguments);};}();var closeUserInfoModal=function closeUserInfoModal(){setUserInfoModalState(false);};var fetcher=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(url);case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetcher(_x2){return _ref2.apply(this,arguments);};}();var GetUserList=function GetUserList(){var _useSwr=useSwr('/Lobby/userList/'+MyID,fetcher),data=_useSwr.data,error=_useSwr.error;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"# friends\"}),data===null||data===void 0?void 0:data.map(function(user){return user.isFriend?/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"user-btn\",onClick:function onClick(){return openUserInfoModal(user.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"20\",height:\"20\",className:\"user-icon\"}),user.state===\"online\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState online\",children:\"\\xB7\"}):null,user.state===\"offline\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState offline\",children:\"\\xB7\"}):null,user.state===\"gaming\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState gaming\",children:\"\\xB7\"}):null,user.id]}):null;}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"# others\"}),data===null||data===void 0?void 0:data.map(function(user){return user.isFriend?null:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"user-btn\",onClick:function onClick(){return openUserInfoModal(user.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"20\",height:\"20\",className:\"user-icon\"}),user.state===\"online\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState online\",children:\"\\xB7\"}):null,user.state===\"offline\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState offline\",children:\"\\xB7\"}):null,user.state===\"gaming\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState gaming\",children:\"\\xB7\"}):null,user.id]});})]});};var GetChatList=function GetChatList(){var _useSwr2=useSwr('/Lobby/myChatList/'+MyID,fetcher),data=_useSwr2.data,error=_useSwr2.error;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"# my chats\"}),data===null||data===void 0?void 0:data.map(function(chat){return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"chat-btn\",onClick:function onClick(){document.location.href='/Chat';sessionStorage.setItem('roomName',chat.title);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"chatNum\",children:chat.num}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA0\",chat.title]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"chatLeave\",children:\"X\"})]});})]});};return/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"MyID\",children:MyID}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"myIcon\",onClick:function onClick(){return openUserInfoModal(MyID);},children:/*#__PURE__*/_jsx(\"img\",{src:findImg(MyIcon),width:\"30\",height:\"30\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[GetUserList,GetChatList,/*#__PURE__*/_jsx(UserInfoModal,{open:UserInfoModalState,close:closeUserInfoModal,myID:MyID,targetID:TargetID,profile:profile})]})]});};export default SideBar;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/client/src/SideBar/SideBar.tsx"],"names":["axios","useSwr","useEffect","useState","findImg","UserInfoModal","SideBar","MyID","setMyID","MyIcon","setMyIcon","id","sessionStorage","getItem","icon","TargetID","setTargetID","profile","setProfile","UserInfoModalState","setUserInfoModalState","openUserInfoModal","get","closeUserInfoModal","fetcher","url","res","data","GetUserList","error","map","user","isFriend","state","GetChatList","chat","document","location","href","setItem","title","num"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport useSwr from 'swr';\nimport {useEffect, useState} from \"react\";\nimport \"./styles/SideBar.scss\"\nimport {findImg} from '../Images/Images'\nimport UserInfoModal from \"./UserInfoModal\";\n\nconst SideBar = () => {\n\tconst [MyID, setMyID] = useState('')\n\tconst [MyIcon, setMyIcon] = useState('')\n\t\n\tuseEffect(() => {\n\t\tconst id = sessionStorage.getItem('nickname')\n\t\tconst icon = sessionStorage.getItem('icon')\n\t\tif (id) setMyID(id)\n\t\tif (icon) setMyIcon(icon)\n\t})\n\t\n\t//UserInfoModal\n\tconst [TargetID, setTargetID] = useState('');\n\tconst [profile, setProfile] = useState<any>()\n\tconst [UserInfoModalState, setUserInfoModalState] = useState(false);\n\tconst openUserInfoModal = async(id:string) => {\n\t\tsetUserInfoModalState(true);\n\t\tsetTargetID(id);\n\t\tsetProfile(await axios.get('/profile/' + MyID + '/' + id))\n\t}\n\tconst closeUserInfoModal = () => {\n\t\tsetUserInfoModalState(false);\n\t}\n\t\n\t\n\tconst fetcher = async (url:string) => {\n\t\tconst res = await axios.get(url)\n\t\treturn res.data;\n\t}\n\n\tconst GetUserList = () => {\n\t\tconst {data, error} = useSwr<{id:string, icon:string, state:string, isFriend:boolean}[]>('/Lobby/userList/' + MyID, fetcher)\n\t\treturn (\n\t\t<>\n\t\t\t<div className=\"title\"># friends</div>\n\t\t\t{data?.map(user=> user.isFriend ?\n\t\t\t\t<button type=\"button\" className=\"user-btn\" onClick={() => openUserInfoModal(user.id)}>\n\t\t\t\t\t<img src={findImg(user.icon)}  width=\"20\" height=\"20\" className=\"user-icon\"/>\n\t\t\t\t\t{user.state === \"online\" ? <span className=\"userState online\">·</span> : null}\n\t\t\t\t\t{user.state === \"offline\" ? <span className=\"userState offline\">·</span> : null}\n\t\t\t\t\t{user.state === \"gaming\" ? <span className=\"userState gaming\">·</span> : null}\n\t\t\t\t\t{user.id}\n\t\t\t\t</button>\n\t\t\t\t: null\n\t\t\t)}\n\t\t\t<div className=\"title\"># others</div>\n\t\t\t{data?.map(user => user.isFriend ? null :\n\t\t\t\t<button type=\"button\" className=\"user-btn\" onClick={() => openUserInfoModal(user.id)}>\n\t\t\t\t\t<img src={findImg(user.icon)}  width=\"20\" height=\"20\" className=\"user-icon\"/>\n\t\t\t\t\t{user.state === \"online\" ? <span className=\"userState online\">·</span> : null}\n\t\t\t\t\t{user.state === \"offline\" ? <span className=\"userState offline\">·</span> : null}\n\t\t\t\t\t{user.state === \"gaming\" ? <span className=\"userState gaming\">·</span> : null}\n\t\t\t\t\t{user.id}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</>\n\t\t)\n\t}\n\n\tconst GetChatList = () => {\n\t\tconst {data, error} = useSwr<{title:string, num: number}[]>('/Lobby/myChatList/' + MyID, fetcher)\n\t\treturn (\n\t\t<>\n\t\t\t<div className=\"title\"># my chats</div>\n\t\t\t{data?.map(chat=>\n\t\t\t\t<div className=\"chat\">\n\t\t\t\t\t<button type=\"button\" className=\"chat-btn\" onClick={() => {\n\t\t\t\t\t\t\tdocument.location.href = '/Chat';\n\t\t\t\t\t\t\tsessionStorage.setItem('roomName', chat.title);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<span className=\"chatNum\">{chat.num}</span>\n\t\t\t\t\t\t<span>&nbsp;{chat.title}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\" className=\"chatLeave\">X</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t\t)\n\t}\n\t\n\t\n\treturn(\n\t<aside>\n\t\t<div className=\"top\">\n\t\t\t<span className=\"MyID\">{MyID}</span>\n\t\t\t<button type=\"button\" className=\"myIcon\" onClick={() => openUserInfoModal(MyID)}>\n\t\t\t\t<img src={findImg(MyIcon)} width=\"30\" height=\"30\"></img>\n\t\t\t</button>\n\t\t</div>\n\t\t<div className=\"bottom\">\n\t\t\t{GetUserList}\n\t\t\t{GetChatList}\n\n\t\t\t<UserInfoModal open={UserInfoModalState} close={closeUserInfoModal} myID={MyID} targetID={TargetID} profile={profile}/>\n\t\t</div>\n\t</aside>\n\t)\n}\nexport default SideBar;"]},"metadata":{},"sourceType":"module"}