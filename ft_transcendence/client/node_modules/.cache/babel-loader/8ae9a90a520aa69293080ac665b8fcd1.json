{"ast":null,"code":"import _regeneratorRuntime from\"/home/sayi/ft/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sayi/ft/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sayi/ft/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import axios from\"axios\";import\"./styles/Modal.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatListModal=function ChatListModal(props){var open=props.open,close=props.close,MyID=props.MyID;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),NewRoomName=_useState2[0],setNewRoomName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),RoomPWD=_useState4[0],setRoomPWD=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),IsProtectedRoom=_useState6[0],setIsProtectedRoom=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),IsUniqueName=_useState8[0],setIsUniqueName=_useState8[1];var handleRoomNameChange=useCallback(function(e){setNewRoomName(e.target.value);},[]);var handelRoomPWD=useCallback(function(e){setRoomPWD(e.target.value);},[]);var ProtectedRoomCheckHandler=useCallback(function(e){setRoomPWD('');setIsProtectedRoom(!IsProtectedRoom);},[IsProtectedRoom]);function makeNewChat(){return _makeNewChat.apply(this,arguments);}function _makeNewChat(){_makeNewChat=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var security;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(RoomPWD==='')security='public';else security='protected';_context.next=3;return axios.post('/Lobby/chatCreate',{title:NewRoomName,password:RoomPWD,owner_id:MyID,security:security}).then(function(res){document.location.href='/chat';sessionStorage.setItem('roomName',NewRoomName);}).catch(function(err){setIsUniqueName(false);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _makeNewChat.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:open?'openModal Modal':'Modal',children:open?/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"header\",{children:[\"New Chatting Room\",/*#__PURE__*/_jsx(\"button\",{className:\"close\",onClick:close,children:\" \\xD7 \"})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Room Name:\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleRoomNameChange,maxLength:20})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:IsProtectedRoom,onChange:function onChange(e){return ProtectedRoomCheckHandler(e);}}),\" protected\"]}),IsUniqueName?null:/*#__PURE__*/_jsx(\"label\",{className:\"error\",children:\"\\uC774\\uBBF8 \\uC874\\uC7AC\\uD558\\uB294 \\uBC29\\uC785\\uB2C8\\uB2E4.\"}),IsProtectedRoom?/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-pwd\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"password:\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handelRoomPWD})]}):null]}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary\",onClick:makeNewChat,children:/*#__PURE__*/_jsx(\"b\",{children:\"Enter\"})})})]}):null});};export default ChatListModal;","map":{"version":3,"sources":["/home/sayi/ft/bye_blackhole/client/src/Lobby/ChatListModal.tsx"],"names":["React","useState","useCallback","axios","ChatListModal","props","open","close","MyID","NewRoomName","setNewRoomName","RoomPWD","setRoomPWD","IsProtectedRoom","setIsProtectedRoom","IsUniqueName","setIsUniqueName","handleRoomNameChange","e","target","value","handelRoomPWD","ProtectedRoomCheckHandler","makeNewChat","security","post","title","password","owner_id","then","res","document","location","href","sessionStorage","setItem","catch","err"],"mappings":"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","sourcesContent":["import React, {useState, useCallback} from 'react';\nimport axios from \"axios\";\nimport \"./styles/Modal.scss\";\n\nconst ChatListModal = ( props: any ) => {\n\tconst { open, close, MyID} = props;\n\n\tconst [NewRoomName, setNewRoomName] = useState(\"\");\n\tconst [RoomPWD, setRoomPWD] = useState(\"\");\n\tconst [IsProtectedRoom, setIsProtectedRoom] = useState(false);\n\tconst [IsUniqueName, setIsUniqueName] = useState(true)\n\n\n\tconst handleRoomNameChange = useCallback((e:any) => {\n\t\tsetNewRoomName(e.target.value);\n\t}, []);\n\tconst handelRoomPWD = useCallback((e:any) => {\n\t\tsetRoomPWD(e.target.value)\n\t}, []);\n\n\tconst ProtectedRoomCheckHandler = useCallback( (e:any) => {\n\t\tsetRoomPWD('')\n\t\tsetIsProtectedRoom(!IsProtectedRoom);\n\t},[IsProtectedRoom]);\n\n\n\tasync function makeNewChat(){\n\t\tif (RoomPWD === '')\n\t\t\tvar security = 'public'\n\t\telse\n\t\t\tvar security = 'protected'\n\t\tawait axios.post('/Lobby/chatCreate', {title:NewRoomName, password:RoomPWD, owner_id:MyID, security:security})\n\t\t.then((res) => {\n\t\t\tdocument.location.href = '/chat'\n\t\t\tsessionStorage.setItem('roomName', NewRoomName)\n\t\t})\n\t\t.catch((err) => {\n\t\t\tsetIsUniqueName(false)\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={ open ? 'openModal Modal' : 'Modal' }>\n\t\t\t{ open ? (\n\t\t\t\t<section>\n\t\t\t\t\t<header>\n\t\t\t\t\t\tNew Chatting Room\n\t\t\t\t\t\t<button className=\"close\" onClick={close}> &times; </button>\n\t\t\t\t\t</header>\n\t\t\t\t\t<main>\n\t\t\t\t\t\t<label >\n\t\t\t\t\t\t\t<b>Room Name:&nbsp;</b>\n\t\t\t\t\t\t\t<input onChange={handleRoomNameChange} maxLength={20}></input>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t&nbsp;&nbsp;<input type=\"checkbox\" checked={IsProtectedRoom} onChange={(e) => ProtectedRoomCheckHandler(e)}></input> protected\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{IsUniqueName ? null : <label className=\"error\">이미 존재하는 방입니다.</label>}\n\t\t\t\t\t\t{IsProtectedRoom ?\n\t\t\t\t\t\t\t<div className=\"checkbox-pwd\">\n\t\t\t\t\t\t\t<b>password:&nbsp;</b>\n\t\t\t\t\t\t\t<input type=\"password\" onChange={handelRoomPWD}></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</main>\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<a className=\"btn btn-primary\" onClick={makeNewChat}><b>Enter</b></a>\n\t\t\t\t\t</footer>\n\t\t\t\t</section>\n\t\t\t) : null }\n\t\t</div>\n\t)\n}\n\nexport default ChatListModal"]},"metadata":{},"sourceType":"module"}