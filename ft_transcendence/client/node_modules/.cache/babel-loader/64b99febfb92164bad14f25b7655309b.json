{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/jin_bye/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/jin_bye/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";//import logo from './logo.svg';\nimport React from\"react\";import'./App.scss';import Chat from\"./Chat/Chat\";import Admin from\"./Admin/Admin\";import Lobby from\"./Lobby/Lobby\";import\"./Chat/styles/global.css\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import Auth from'./Auth/Auth';import{Beforeunload}from'react-beforeunload';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var redirect_auth=function redirect_auth(){window.location.href='/log/auth';return null;};function Logout(){return _Logout.apply(this,arguments);}function _Logout(){_Logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var intra_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:intra_id=sessionStorage.getItem('intraID');if(!intra_id){_context.next=4;break;}_context.next=4;return axios.patch('log/out',{intra_id:intra_id});case 4:case\"end\":return _context.stop();}}},_callee);}));return _Logout.apply(this,arguments);}var handle=function handle(event){var clientY=event.clientY;if(clientY<=0)Logout();};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){return sessionStorage.getItem('intraID')?/*#__PURE__*/_jsxs(_Fragment,{children:[document.addEventListener(\"mouseleave\",handle),/*#__PURE__*/_jsx(Lobby,{})]}):redirect_auth();}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/2-factor-auth\",render:function render(){return/*#__PURE__*/_jsx(Auth,{});}}),/*#__PURE__*/_jsx(Route,{path:\"/Admin\",exact:true,render:function render(){return sessionStorage.getItem('intraID')?/*#__PURE__*/_jsx(Beforeunload,{onBeforeunload:Logout,children:/*#__PURE__*/_jsx(Admin,{})}):redirect_auth();}}),/*#__PURE__*/_jsx(Route,{path:\"/Lobby\",exact:true,render:function render(){return sessionStorage.getItem('intraID')?/*#__PURE__*/_jsx(Beforeunload,{onBeforeunload:Logout,children:/*#__PURE__*/_jsx(Lobby,{})}):redirect_auth();}}),/*#__PURE__*/_jsx(Route,{path:\"/Chat\",exact:true,render:function render(){return sessionStorage.getItem('intraID')?/*#__PURE__*/_jsx(Beforeunload,{onBeforeunload:Logout,children:/*#__PURE__*/_jsx(Chat,{})}):redirect_auth();}}),/*#__PURE__*/_jsx(Route,{render:function render(_ref){var location=_ref.location;return/*#__PURE__*/_jsxs(\"div\",{children:[\"Not Found \",location.pathname]});}})]})})});}export default App;","map":{"version":3,"sources":["/Users/jinkim/jin_bye/client/src/App.tsx"],"names":["React","Chat","Admin","Lobby","BrowserRouter","Router","Route","Switch","Auth","Beforeunload","axios","App","redirect_auth","window","location","href","Logout","intra_id","sessionStorage","getItem","patch","handle","event","clientY","document","addEventListener","pathname"],"mappings":"mSAAA;AACA,MAAOA,CAAAA,KAAP,KAA8B,OAA9B,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAO,0BAAP,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,CAAyCC,MAAzC,KAAiE,kBAAjE,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,OAAQC,YAAR,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,QAASC,CAAAA,GAAT,EAAe,CAEd,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC3BC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,WAAvB,CACA,MAAO,KAAP,CACA,CAHD,CAFc,QAOCC,CAAAA,MAPD,4HAOd,gJACOC,QADP,CACkBC,cAAc,CAACC,OAAf,CAAuB,SAAvB,CADlB,KAEKF,QAFL,+CAGQP,CAAAA,KAAK,CAACU,KAAN,CAAY,SAAZ,CAAwB,CAACH,QAAQ,CAAGA,QAAZ,CAAxB,CAHR,uDAPc,yCAad,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAgB,IACtBC,CAAAA,OADsB,CACVD,KADU,CACtBC,OADsB,CAE9B,GAAIA,OAAO,EAAI,CAAf,CAAkBP,MAAM,GACtB,CAHH,CAKA,mBACA,YAAK,SAAS,CAAC,KAAf,uBACC,KAAC,MAAD,wBACE,MAAC,MAAD,yBACD,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,MAAM,CAAE,wBAC7BE,CAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,eACA,2BACEK,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,CAAwCJ,MAAxC,CADF,cAEC,KAAC,KAAD,IAFD,GADA,CAKET,aAAa,EANc,EAA9B,EADC,cASD,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,gBAAlB,CAAmC,MAAM,CAAE,qCAC1C,KAAC,IAAD,IAD0C,EAA3C,EATC,cAYD,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,KAA1B,CAA2B,MAAM,CAAE,wBAClCM,CAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,eACA,KAAC,YAAD,EAAc,cAAc,CAAEH,MAA9B,uBACC,KAAC,KAAD,IADD,EADA,CAIEJ,aAAa,EALmB,EAAnC,EAZC,cAmBD,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,KAA1B,CAA2B,MAAM,CAAE,wBAClCM,CAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,eACA,KAAC,YAAD,EAAc,cAAc,CAAEH,MAA9B,uBACC,KAAC,KAAD,IADD,EADA,CAIEJ,aAAa,EALmB,EAAnC,EAnBC,cA0BD,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,KAAzB,CAA0B,MAAM,CAAE,wBACjCM,CAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,eACA,KAAC,YAAD,EAAc,cAAc,CAAEH,MAA9B,uBACC,KAAC,IAAD,IADD,EADA,CAIEJ,aAAa,EALkB,EAAlC,EA1BC,cAiCD,KAAC,KAAD,EACC,MAAM,CAAE,yBAAEE,CAAAA,QAAF,MAAEA,QAAF,oBACL,oCACUA,QAAQ,CAACY,QADnB,GADK,EADT,EAjCC,GADF,EADD,EADA,CA+CE,CAGH,cAAef,CAAAA,GAAf","sourcesContent":["//import logo from './logo.svg';\nimport React, {useState} from \"react\";\nimport './App.scss';\nimport Chat from \"./Chat/Chat\";\nimport Admin from \"./Admin/Admin\";\nimport Lobby from \"./Lobby/Lobby\"\nimport \"./Chat/styles/global.css\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport Auth from './Auth/Auth'\nimport {Beforeunload} from 'react-beforeunload';\nimport axios from \"axios\";\n\nfunction App() {\n\n\tconst redirect_auth = () => {\n\t\twindow.location.href = '/log/auth'\n\t\treturn null\n\t}\n\n\tasync function Logout(){\n\t\tconst intra_id = sessionStorage.getItem('intraID')\n\t\tif (intra_id)\n\t\t\tawait axios.patch('log/out' , {intra_id : intra_id})\n\t}\n\n\tconst handle = (event: any) => {\n\t\tconst { clientY } = event;\n\t\tif (clientY <= 0) Logout();\n\t  };\n\n\treturn (\n\t<div className=\"App\">\n\t\t<Router>\n\t\t  <Switch>\n\t\t\t<Route exact path=\"/\" render={() =>\n\t\t\t\tsessionStorage.getItem('intraID') ? \n\t\t\t\t<>\n\t\t\t\t\t{document.addEventListener(\"mouseleave\", handle)}\n\t\t\t\t\t<Lobby/>\n\t\t\t\t</>\n\t\t\t\t: redirect_auth()\n\t\t\t}/>\n\t\t\t<Route exact path=\"/2-factor-auth\" render={() =>\n\t\t\t\t<Auth/>\n\t\t\t}/>\n\t\t\t<Route path=\"/Admin\" exact render={() =>\n\t\t\t\tsessionStorage.getItem('intraID') ? \n\t\t\t\t<Beforeunload onBeforeunload={Logout}>\n\t\t\t\t\t<Admin/> \n\t\t\t\t</Beforeunload>\n\t\t\t\t: redirect_auth()\n\t\t\t}/>\n\t\t\t<Route path=\"/Lobby\" exact render={() =>\n\t\t\t\tsessionStorage.getItem('intraID') ? \n\t\t\t\t<Beforeunload onBeforeunload={Logout}>\n\t\t\t\t\t<Lobby/> \n\t\t\t\t</Beforeunload>\n\t\t\t\t: redirect_auth()\n\t\t\t}/>\n\t\t\t<Route path=\"/Chat\" exact render={() =>\n\t\t\t\tsessionStorage.getItem('intraID') ? \n\t\t\t\t<Beforeunload onBeforeunload={Logout}>\n\t\t\t\t\t<Chat/> \n\t\t\t\t</Beforeunload>\n\t\t\t\t: redirect_auth()\n\t\t\t}/>\n\t\t\t<Route\n\t\t\t\trender={({location}) => (\n\t\t\t\t\t  <div>\n\t\t\t\t\t\tNot Found {location.pathname}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t  </Switch>\n\t\t</Router>\n\t</div>\n\t);\n  }\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}